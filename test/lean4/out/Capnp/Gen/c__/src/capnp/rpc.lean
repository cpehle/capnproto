-- Generated by capnpc-lean4; DO NOT EDIT.
-- source: c++/src/capnp/rpc.capnp

import Capnp.Runtime
import Capnp.Rpc

set_option maxHeartbeats 2000000


namespace Capnp.Gen.c__.src.capnp.rpc

structure Message.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Message.read (ptr : Capnp.AnyPointer) : Message.Reader := { struct := Capnp.readStruct ptr }
def Message.readChecked (ptr : Capnp.AnyPointer) : Except String Message.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Message.fromStruct (sr : Capnp.StructReader) : Message.Reader := { struct := sr }

structure Message.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Message.Builder.fromStruct (sb : Capnp.StructBuilder) : Message.Builder := { struct := sb }


structure Bootstrap.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Bootstrap.read (ptr : Capnp.AnyPointer) : Bootstrap.Reader := { struct := Capnp.readStruct ptr }
def Bootstrap.readChecked (ptr : Capnp.AnyPointer) : Except String Bootstrap.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Bootstrap.fromStruct (sr : Capnp.StructReader) : Bootstrap.Reader := { struct := sr }

structure Bootstrap.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Bootstrap.Builder.fromStruct (sb : Capnp.StructBuilder) : Bootstrap.Builder := { struct := sb }


structure Call.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Call.read (ptr : Capnp.AnyPointer) : Call.Reader := { struct := Capnp.readStruct ptr }
def Call.readChecked (ptr : Capnp.AnyPointer) : Except String Call.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Call.fromStruct (sr : Capnp.StructReader) : Call.Reader := { struct := sr }

structure Call.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Call.Builder.fromStruct (sb : Capnp.StructBuilder) : Call.Builder := { struct := sb }


structure Call.SendResultsToGroup.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Call.SendResultsToGroup.read (ptr : Capnp.AnyPointer) : Call.SendResultsToGroup.Reader := { struct := Capnp.readStruct ptr }
def Call.SendResultsToGroup.readChecked (ptr : Capnp.AnyPointer) : Except String Call.SendResultsToGroup.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Call.SendResultsToGroup.fromStruct (sr : Capnp.StructReader) : Call.SendResultsToGroup.Reader := { struct := sr }

structure Call.SendResultsToGroup.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Call.SendResultsToGroup.Builder.fromStruct (sb : Capnp.StructBuilder) : Call.SendResultsToGroup.Builder := { struct := sb }


structure Return.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Return.read (ptr : Capnp.AnyPointer) : Return.Reader := { struct := Capnp.readStruct ptr }
def Return.readChecked (ptr : Capnp.AnyPointer) : Except String Return.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Return.fromStruct (sr : Capnp.StructReader) : Return.Reader := { struct := sr }

structure Return.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Return.Builder.fromStruct (sb : Capnp.StructBuilder) : Return.Builder := { struct := sb }


structure Finish.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Finish.read (ptr : Capnp.AnyPointer) : Finish.Reader := { struct := Capnp.readStruct ptr }
def Finish.readChecked (ptr : Capnp.AnyPointer) : Except String Finish.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Finish.fromStruct (sr : Capnp.StructReader) : Finish.Reader := { struct := sr }

structure Finish.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Finish.Builder.fromStruct (sb : Capnp.StructBuilder) : Finish.Builder := { struct := sb }


structure Resolve.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Resolve.read (ptr : Capnp.AnyPointer) : Resolve.Reader := { struct := Capnp.readStruct ptr }
def Resolve.readChecked (ptr : Capnp.AnyPointer) : Except String Resolve.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Resolve.fromStruct (sr : Capnp.StructReader) : Resolve.Reader := { struct := sr }

structure Resolve.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Resolve.Builder.fromStruct (sb : Capnp.StructBuilder) : Resolve.Builder := { struct := sb }


structure Release.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Release.read (ptr : Capnp.AnyPointer) : Release.Reader := { struct := Capnp.readStruct ptr }
def Release.readChecked (ptr : Capnp.AnyPointer) : Except String Release.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Release.fromStruct (sr : Capnp.StructReader) : Release.Reader := { struct := sr }

structure Release.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Release.Builder.fromStruct (sb : Capnp.StructBuilder) : Release.Builder := { struct := sb }


structure Disembargo.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Disembargo.read (ptr : Capnp.AnyPointer) : Disembargo.Reader := { struct := Capnp.readStruct ptr }
def Disembargo.readChecked (ptr : Capnp.AnyPointer) : Except String Disembargo.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Disembargo.fromStruct (sr : Capnp.StructReader) : Disembargo.Reader := { struct := sr }

structure Disembargo.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Disembargo.Builder.fromStruct (sb : Capnp.StructBuilder) : Disembargo.Builder := { struct := sb }


structure Disembargo.ContextGroup.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Disembargo.ContextGroup.read (ptr : Capnp.AnyPointer) : Disembargo.ContextGroup.Reader := { struct := Capnp.readStruct ptr }
def Disembargo.ContextGroup.readChecked (ptr : Capnp.AnyPointer) : Except String Disembargo.ContextGroup.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Disembargo.ContextGroup.fromStruct (sr : Capnp.StructReader) : Disembargo.ContextGroup.Reader := { struct := sr }

structure Disembargo.ContextGroup.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Disembargo.ContextGroup.Builder.fromStruct (sb : Capnp.StructBuilder) : Disembargo.ContextGroup.Builder := { struct := sb }


structure Provide.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Provide.read (ptr : Capnp.AnyPointer) : Provide.Reader := { struct := Capnp.readStruct ptr }
def Provide.readChecked (ptr : Capnp.AnyPointer) : Except String Provide.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Provide.fromStruct (sr : Capnp.StructReader) : Provide.Reader := { struct := sr }

structure Provide.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Provide.Builder.fromStruct (sb : Capnp.StructBuilder) : Provide.Builder := { struct := sb }


structure Accept.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Accept.read (ptr : Capnp.AnyPointer) : Accept.Reader := { struct := Capnp.readStruct ptr }
def Accept.readChecked (ptr : Capnp.AnyPointer) : Except String Accept.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Accept.fromStruct (sr : Capnp.StructReader) : Accept.Reader := { struct := sr }

structure Accept.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Accept.Builder.fromStruct (sb : Capnp.StructBuilder) : Accept.Builder := { struct := sb }


structure ThirdPartyAnswer.Reader where
  struct : Capnp.StructReader

  deriving BEq

def ThirdPartyAnswer.read (ptr : Capnp.AnyPointer) : ThirdPartyAnswer.Reader := { struct := Capnp.readStruct ptr }
def ThirdPartyAnswer.readChecked (ptr : Capnp.AnyPointer) : Except String ThirdPartyAnswer.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def ThirdPartyAnswer.fromStruct (sr : Capnp.StructReader) : ThirdPartyAnswer.Reader := { struct := sr }

structure ThirdPartyAnswer.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def ThirdPartyAnswer.Builder.fromStruct (sb : Capnp.StructBuilder) : ThirdPartyAnswer.Builder := { struct := sb }


structure Join.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Join.read (ptr : Capnp.AnyPointer) : Join.Reader := { struct := Capnp.readStruct ptr }
def Join.readChecked (ptr : Capnp.AnyPointer) : Except String Join.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Join.fromStruct (sr : Capnp.StructReader) : Join.Reader := { struct := sr }

structure Join.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Join.Builder.fromStruct (sb : Capnp.StructBuilder) : Join.Builder := { struct := sb }


structure MessageTarget.Reader where
  struct : Capnp.StructReader

  deriving BEq

def MessageTarget.read (ptr : Capnp.AnyPointer) : MessageTarget.Reader := { struct := Capnp.readStruct ptr }
def MessageTarget.readChecked (ptr : Capnp.AnyPointer) : Except String MessageTarget.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def MessageTarget.fromStruct (sr : Capnp.StructReader) : MessageTarget.Reader := { struct := sr }

structure MessageTarget.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def MessageTarget.Builder.fromStruct (sb : Capnp.StructBuilder) : MessageTarget.Builder := { struct := sb }


structure Payload.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Payload.read (ptr : Capnp.AnyPointer) : Payload.Reader := { struct := Capnp.readStruct ptr }
def Payload.readChecked (ptr : Capnp.AnyPointer) : Except String Payload.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Payload.fromStruct (sr : Capnp.StructReader) : Payload.Reader := { struct := sr }

structure Payload.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Payload.Builder.fromStruct (sb : Capnp.StructBuilder) : Payload.Builder := { struct := sb }


structure CapDescriptor.Reader where
  struct : Capnp.StructReader

  deriving BEq

def CapDescriptor.read (ptr : Capnp.AnyPointer) : CapDescriptor.Reader := { struct := Capnp.readStruct ptr }
def CapDescriptor.readChecked (ptr : Capnp.AnyPointer) : Except String CapDescriptor.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def CapDescriptor.fromStruct (sr : Capnp.StructReader) : CapDescriptor.Reader := { struct := sr }

structure CapDescriptor.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def CapDescriptor.Builder.fromStruct (sb : Capnp.StructBuilder) : CapDescriptor.Builder := { struct := sb }


structure PromisedAnswer.Reader where
  struct : Capnp.StructReader

  deriving BEq

def PromisedAnswer.read (ptr : Capnp.AnyPointer) : PromisedAnswer.Reader := { struct := Capnp.readStruct ptr }
def PromisedAnswer.readChecked (ptr : Capnp.AnyPointer) : Except String PromisedAnswer.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def PromisedAnswer.fromStruct (sr : Capnp.StructReader) : PromisedAnswer.Reader := { struct := sr }

structure PromisedAnswer.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def PromisedAnswer.Builder.fromStruct (sb : Capnp.StructBuilder) : PromisedAnswer.Builder := { struct := sb }


structure PromisedAnswer.Op.Reader where
  struct : Capnp.StructReader

  deriving BEq

def PromisedAnswer.Op.read (ptr : Capnp.AnyPointer) : PromisedAnswer.Op.Reader := { struct := Capnp.readStruct ptr }
def PromisedAnswer.Op.readChecked (ptr : Capnp.AnyPointer) : Except String PromisedAnswer.Op.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def PromisedAnswer.Op.fromStruct (sr : Capnp.StructReader) : PromisedAnswer.Op.Reader := { struct := sr }

structure PromisedAnswer.Op.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def PromisedAnswer.Op.Builder.fromStruct (sb : Capnp.StructBuilder) : PromisedAnswer.Op.Builder := { struct := sb }


structure ThirdPartyCapDescriptor.Reader where
  struct : Capnp.StructReader

  deriving BEq

def ThirdPartyCapDescriptor.read (ptr : Capnp.AnyPointer) : ThirdPartyCapDescriptor.Reader := { struct := Capnp.readStruct ptr }
def ThirdPartyCapDescriptor.readChecked (ptr : Capnp.AnyPointer) : Except String ThirdPartyCapDescriptor.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def ThirdPartyCapDescriptor.fromStruct (sr : Capnp.StructReader) : ThirdPartyCapDescriptor.Reader := { struct := sr }

structure ThirdPartyCapDescriptor.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def ThirdPartyCapDescriptor.Builder.fromStruct (sb : Capnp.StructBuilder) : ThirdPartyCapDescriptor.Builder := { struct := sb }


structure Exception.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Exception.read (ptr : Capnp.AnyPointer) : Exception.Reader := { struct := Capnp.readStruct ptr }
def Exception.readChecked (ptr : Capnp.AnyPointer) : Except String Exception.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Exception.fromStruct (sr : Capnp.StructReader) : Exception.Reader := { struct := sr }

structure Exception.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Exception.Builder.fromStruct (sb : Capnp.StructBuilder) : Exception.Builder := { struct := sb }


structure Exception.Detail.Reader where
  struct : Capnp.StructReader

  deriving BEq

def Exception.Detail.read (ptr : Capnp.AnyPointer) : Exception.Detail.Reader := { struct := Capnp.readStruct ptr }
def Exception.Detail.readChecked (ptr : Capnp.AnyPointer) : Except String Exception.Detail.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def Exception.Detail.fromStruct (sr : Capnp.StructReader) : Exception.Detail.Reader := { struct := sr }

structure Exception.Detail.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def Exception.Detail.Builder.fromStruct (sb : Capnp.StructBuilder) : Exception.Detail.Builder := { struct := sb }


abbrev Message := Message.Reader

inductive Exception.Type where
  | failed
  | overloaded
  | disconnected
  | unimplemented
  | unknown (value : UInt16)

  deriving BEq, Repr

def Exception.Type.toUInt16 : Exception.Type -> UInt16
  | Exception.Type.failed => 0
  | Exception.Type.overloaded => 1
  | Exception.Type.disconnected => 2
  | Exception.Type.unimplemented => 3
  | Exception.Type.unknown v => v

def Exception.Type.ofUInt16 : UInt16 -> Exception.Type
  | 0 => Exception.Type.failed
  | 1 => Exception.Type.overloaded
  | 2 => Exception.Type.disconnected
  | 3 => Exception.Type.unimplemented
  | v => Exception.Type.unknown v

inductive Message.Which where
  | none
  | unimplemented (value : Message.Reader)
  | abort (value : Exception.Reader)
  | call (value : Call.Reader)
  | _return (value : Return.Reader)
  | finish (value : Finish.Reader)
  | resolve (value : Resolve.Reader)
  | release (value : Release.Reader)
  | obsoleteSave (value : Capnp.AnyPointer)
  | bootstrap (value : Bootstrap.Reader)
  | obsoleteDelete (value : Capnp.AnyPointer)
  | provide (value : Provide.Reader)
  | accept (value : Accept.Reader)
  | join (value : Join.Reader)
  | disembargo (value : Disembargo.Reader)
  | thirdPartyAnswer (value : ThirdPartyAnswer.Reader)

instance : BEq Message.Which where
  beq a b :=
    match a, b with
    | Message.Which.none, Message.Which.none => true
    | Message.Which.unimplemented va, Message.Which.unimplemented vb => va == vb
    | Message.Which.abort va, Message.Which.abort vb => va == vb
    | Message.Which.call va, Message.Which.call vb => va == vb
    | Message.Which._return va, Message.Which._return vb => va == vb
    | Message.Which.finish va, Message.Which.finish vb => va == vb
    | Message.Which.resolve va, Message.Which.resolve vb => va == vb
    | Message.Which.release va, Message.Which.release vb => va == vb
    | Message.Which.obsoleteSave va, Message.Which.obsoleteSave vb => va == vb
    | Message.Which.bootstrap va, Message.Which.bootstrap vb => va == vb
    | Message.Which.obsoleteDelete va, Message.Which.obsoleteDelete vb => va == vb
    | Message.Which.provide va, Message.Which.provide vb => va == vb
    | Message.Which.accept va, Message.Which.accept vb => va == vb
    | Message.Which.join va, Message.Which.join vb => va == vb
    | Message.Which.disembargo va, Message.Which.disembargo vb => va == vb
    | Message.Which.thirdPartyAnswer va, Message.Which.thirdPartyAnswer vb => va == vb
    | _, _ => false


inductive Call.SendResultsToGroup.Which where
  | none
  | caller (value : Unit)
  | yourself (value : Unit)
  | thirdParty (value : Capnp.AnyPointer)

instance : BEq Call.SendResultsToGroup.Which where
  beq a b :=
    match a, b with
    | Call.SendResultsToGroup.Which.none, Call.SendResultsToGroup.Which.none => true
    | Call.SendResultsToGroup.Which.caller va, Call.SendResultsToGroup.Which.caller vb => va == vb
    | Call.SendResultsToGroup.Which.yourself va, Call.SendResultsToGroup.Which.yourself vb => va == vb
    | Call.SendResultsToGroup.Which.thirdParty va, Call.SendResultsToGroup.Which.thirdParty vb => va == vb
    | _, _ => false


inductive Return.Which where
  | none
  | results (value : Payload.Reader)
  | exception (value : Exception.Reader)
  | canceled (value : Unit)
  | resultsSentElsewhere (value : Unit)
  | takeFromOtherQuestion (value : UInt32)
  | awaitFromThirdParty (value : Capnp.AnyPointer)

instance : BEq Return.Which where
  beq a b :=
    match a, b with
    | Return.Which.none, Return.Which.none => true
    | Return.Which.results va, Return.Which.results vb => va == vb
    | Return.Which.exception va, Return.Which.exception vb => va == vb
    | Return.Which.canceled va, Return.Which.canceled vb => va == vb
    | Return.Which.resultsSentElsewhere va, Return.Which.resultsSentElsewhere vb => va == vb
    | Return.Which.takeFromOtherQuestion va, Return.Which.takeFromOtherQuestion vb => va == vb
    | Return.Which.awaitFromThirdParty va, Return.Which.awaitFromThirdParty vb => va == vb
    | _, _ => false


inductive Resolve.Which where
  | none
  | cap (value : CapDescriptor.Reader)
  | exception (value : Exception.Reader)

instance : BEq Resolve.Which where
  beq a b :=
    match a, b with
    | Resolve.Which.none, Resolve.Which.none => true
    | Resolve.Which.cap va, Resolve.Which.cap vb => va == vb
    | Resolve.Which.exception va, Resolve.Which.exception vb => va == vb
    | _, _ => false


inductive Disembargo.ContextGroup.Which where
  | none
  | senderLoopback (value : UInt32)
  | receiverLoopback (value : UInt32)
  | accept (value : Capnp.Data)

instance : BEq Disembargo.ContextGroup.Which where
  beq a b :=
    match a, b with
    | Disembargo.ContextGroup.Which.none, Disembargo.ContextGroup.Which.none => true
    | Disembargo.ContextGroup.Which.senderLoopback va, Disembargo.ContextGroup.Which.senderLoopback vb => va == vb
    | Disembargo.ContextGroup.Which.receiverLoopback va, Disembargo.ContextGroup.Which.receiverLoopback vb => va == vb
    | Disembargo.ContextGroup.Which.accept va, Disembargo.ContextGroup.Which.accept vb => va == vb
    | _, _ => false


inductive MessageTarget.Which where
  | none
  | importedCap (value : UInt32)
  | promisedAnswer (value : PromisedAnswer.Reader)

instance : BEq MessageTarget.Which where
  beq a b :=
    match a, b with
    | MessageTarget.Which.none, MessageTarget.Which.none => true
    | MessageTarget.Which.importedCap va, MessageTarget.Which.importedCap vb => va == vb
    | MessageTarget.Which.promisedAnswer va, MessageTarget.Which.promisedAnswer vb => va == vb
    | _, _ => false


inductive CapDescriptor.Which where
  | none_
  | none (value : Unit)
  | senderHosted (value : UInt32)
  | senderPromise (value : UInt32)
  | receiverHosted (value : UInt32)
  | receiverAnswer (value : PromisedAnswer.Reader)
  | thirdPartyHosted (value : ThirdPartyCapDescriptor.Reader)

instance : BEq CapDescriptor.Which where
  beq a b :=
    match a, b with
    | CapDescriptor.Which.none_, CapDescriptor.Which.none_ => true
    | CapDescriptor.Which.none va, CapDescriptor.Which.none vb => va == vb
    | CapDescriptor.Which.senderHosted va, CapDescriptor.Which.senderHosted vb => va == vb
    | CapDescriptor.Which.senderPromise va, CapDescriptor.Which.senderPromise vb => va == vb
    | CapDescriptor.Which.receiverHosted va, CapDescriptor.Which.receiverHosted vb => va == vb
    | CapDescriptor.Which.receiverAnswer va, CapDescriptor.Which.receiverAnswer vb => va == vb
    | CapDescriptor.Which.thirdPartyHosted va, CapDescriptor.Which.thirdPartyHosted vb => va == vb
    | _, _ => false


inductive PromisedAnswer.Op.Which where
  | none
  | noop (value : Unit)
  | getPointerField (value : UInt16)

instance : BEq PromisedAnswer.Op.Which where
  beq a b :=
    match a, b with
    | PromisedAnswer.Op.Which.none, PromisedAnswer.Op.Which.none => true
    | PromisedAnswer.Op.Which.noop va, PromisedAnswer.Op.Which.noop vb => va == vb
    | PromisedAnswer.Op.Which.getPointerField va, PromisedAnswer.Op.Which.getPointerField vb => va == vb
    | _, _ => false



mutual
  structure Bootstrap where
    questionId : UInt32
    deprecatedObjectId : Capnp.AnyPointer


  structure Call where
    questionId : UInt32
    target : MessageTarget
    interfaceId : UInt64
    methodId : UInt16
    params : Payload
    sendResultsTo : Call.SendResultsToGroup
    allowThirdPartyTailCall : Bool
    noPromisePipelining : Bool
    onlyPromisePipeline : Bool


  structure Call.SendResultsToGroup where
    which : Call.SendResultsToGroup.Which


  structure Return where
    answerId : UInt32
    releaseParamCaps : Bool
    noFinishNeeded : Bool
    which : Return.Which


  structure Finish where
    questionId : UInt32
    releaseResultCaps : Bool
    requireEarlyCancellationWorkaround : Bool


  structure Resolve where
    promiseId : UInt32
    which : Resolve.Which


  structure Release where
    id : UInt32
    referenceCount : UInt32


  structure Disembargo where
    target : MessageTarget
    context : Disembargo.ContextGroup


  structure Disembargo.ContextGroup where
    which : Disembargo.ContextGroup.Which


  structure Provide where
    questionId : UInt32
    target : MessageTarget
    recipient : Capnp.AnyPointer


  structure Accept where
    questionId : UInt32
    provision : Capnp.AnyPointer
    embargo : Capnp.Data


  structure ThirdPartyAnswer where
    completion : Capnp.AnyPointer
    answerId : UInt32


  structure Join where
    questionId : UInt32
    target : MessageTarget
    keyPart : Capnp.AnyPointer


  structure MessageTarget where
    which : MessageTarget.Which


  structure Payload where
    content : Capnp.AnyPointer
    capTable : Array CapDescriptor


  structure CapDescriptor where
    attachedFd : UInt8
    which : CapDescriptor.Which


  structure PromisedAnswer where
    questionId : UInt32
    transform : Array PromisedAnswer.Op


  structure PromisedAnswer.Op where
    which : PromisedAnswer.Op.Which


  structure ThirdPartyCapDescriptor where
    id : Capnp.AnyPointer
    vineId : UInt32


  structure Exception where
    reason : Capnp.Text
    obsoleteIsCallersFault : Bool
    obsoleteDurability : UInt16
    type : Exception.Type
    trace : Capnp.Text
    details : Array Exception.Detail


  structure Exception.Detail where
    detailId : UInt64
    data : Capnp.Data


end


def Message.Reader.getUnimplemented (r : Message.Reader) : Message.Reader := Message.read (Capnp.getPointer r.struct 0)
def Message.Reader.getUnimplementedChecked (r : Message.Reader) : Except String (Message.Reader) := Message.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasUnimplemented (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getAbort (r : Message.Reader) : Exception.Reader := Exception.read (Capnp.getPointer r.struct 0)
def Message.Reader.getAbortChecked (r : Message.Reader) : Except String (Exception.Reader) := Exception.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasAbort (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getCall (r : Message.Reader) : Call.Reader := Call.read (Capnp.getPointer r.struct 0)
def Message.Reader.getCallChecked (r : Message.Reader) : Except String (Call.Reader) := Call.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasCall (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.get_return (r : Message.Reader) : Return.Reader := Return.read (Capnp.getPointer r.struct 0)
def Message.Reader.get_returnChecked (r : Message.Reader) : Except String (Return.Reader) := Return.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.has_return (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getFinish (r : Message.Reader) : Finish.Reader := Finish.read (Capnp.getPointer r.struct 0)
def Message.Reader.getFinishChecked (r : Message.Reader) : Except String (Finish.Reader) := Finish.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasFinish (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getResolve (r : Message.Reader) : Resolve.Reader := Resolve.read (Capnp.getPointer r.struct 0)
def Message.Reader.getResolveChecked (r : Message.Reader) : Except String (Resolve.Reader) := Resolve.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasResolve (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getRelease (r : Message.Reader) : Release.Reader := Release.read (Capnp.getPointer r.struct 0)
def Message.Reader.getReleaseChecked (r : Message.Reader) : Except String (Release.Reader) := Release.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasRelease (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getObsoleteSave (r : Message.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def Message.Reader.getObsoleteSaveChecked (r : Message.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasObsoleteSave (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getBootstrap (r : Message.Reader) : Bootstrap.Reader := Bootstrap.read (Capnp.getPointer r.struct 0)
def Message.Reader.getBootstrapChecked (r : Message.Reader) : Except String (Bootstrap.Reader) := Bootstrap.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasBootstrap (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getObsoleteDelete (r : Message.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def Message.Reader.getObsoleteDeleteChecked (r : Message.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasObsoleteDelete (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getProvide (r : Message.Reader) : Provide.Reader := Provide.read (Capnp.getPointer r.struct 0)
def Message.Reader.getProvideChecked (r : Message.Reader) : Except String (Provide.Reader) := Provide.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasProvide (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getAccept (r : Message.Reader) : Accept.Reader := Accept.read (Capnp.getPointer r.struct 0)
def Message.Reader.getAcceptChecked (r : Message.Reader) : Except String (Accept.Reader) := Accept.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasAccept (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getJoin (r : Message.Reader) : Join.Reader := Join.read (Capnp.getPointer r.struct 0)
def Message.Reader.getJoinChecked (r : Message.Reader) : Except String (Join.Reader) := Join.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasJoin (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getDisembargo (r : Message.Reader) : Disembargo.Reader := Disembargo.read (Capnp.getPointer r.struct 0)
def Message.Reader.getDisembargoChecked (r : Message.Reader) : Except String (Disembargo.Reader) := Disembargo.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasDisembargo (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.getThirdPartyAnswer (r : Message.Reader) : ThirdPartyAnswer.Reader := ThirdPartyAnswer.read (Capnp.getPointer r.struct 0)
def Message.Reader.getThirdPartyAnswerChecked (r : Message.Reader) : Except String (ThirdPartyAnswer.Reader) := ThirdPartyAnswer.readChecked (Capnp.getPointer r.struct 0)
def Message.Reader.hasThirdPartyAnswer (r : Message.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Message.Reader.which (r : Message.Reader) : Message.Which :=
  let disc := Capnp.getUInt16 r.struct 0
  match disc with
  | 0 => Message.Which.unimplemented (r.getUnimplemented)
  | 1 => Message.Which.abort (r.getAbort)
  | 2 => Message.Which.call (r.getCall)
  | 3 => Message.Which._return (r.get_return)
  | 4 => Message.Which.finish (r.getFinish)
  | 5 => Message.Which.resolve (r.getResolve)
  | 6 => Message.Which.release (r.getRelease)
  | 7 => Message.Which.obsoleteSave (r.getObsoleteSave)
  | 8 => Message.Which.bootstrap (r.getBootstrap)
  | 9 => Message.Which.obsoleteDelete (r.getObsoleteDelete)
  | 10 => Message.Which.provide (r.getProvide)
  | 11 => Message.Which.accept (r.getAccept)
  | 12 => Message.Which.join (r.getJoin)
  | 13 => Message.Which.disembargo (r.getDisembargo)
  | 14 => Message.Which.thirdPartyAnswer (r.getThirdPartyAnswer)
  | _ => Message.Which.none

def Message.Reader.whichChecked (r : Message.Reader) : Except String Message.Which := do
  let disc := Capnp.getUInt16 r.struct 0
  match disc with
  | 0 => do
    let v ← r.getUnimplementedChecked
    return Message.Which.unimplemented v
  | 1 => do
    let v ← r.getAbortChecked
    return Message.Which.abort v
  | 2 => do
    let v ← r.getCallChecked
    return Message.Which.call v
  | 3 => do
    let v ← r.get_returnChecked
    return Message.Which._return v
  | 4 => do
    let v ← r.getFinishChecked
    return Message.Which.finish v
  | 5 => do
    let v ← r.getResolveChecked
    return Message.Which.resolve v
  | 6 => do
    let v ← r.getReleaseChecked
    return Message.Which.release v
  | 7 => do
    let v ← r.getObsoleteSaveChecked
    return Message.Which.obsoleteSave v
  | 8 => do
    let v ← r.getBootstrapChecked
    return Message.Which.bootstrap v
  | 9 => do
    let v ← r.getObsoleteDeleteChecked
    return Message.Which.obsoleteDelete v
  | 10 => do
    let v ← r.getProvideChecked
    return Message.Which.provide v
  | 11 => do
    let v ← r.getAcceptChecked
    return Message.Which.accept v
  | 12 => do
    let v ← r.getJoinChecked
    return Message.Which.join v
  | 13 => do
    let v ← r.getDisembargoChecked
    return Message.Which.disembargo v
  | 14 => do
    let v ← r.getThirdPartyAnswerChecked
    return Message.Which.thirdPartyAnswer v
  | _ => return Message.Which.none
def Message.initRoot : Capnp.BuilderM Message.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def Message.Builder.clearUnimplemented (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initUnimplemented (b : Message.Builder) : Capnp.BuilderM Message.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 0)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return Message.Builder.fromStruct sb

def Message.Builder.clearAbort (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initAbort (b : Message.Builder) : Capnp.BuilderM Exception.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 1)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 3
  return Exception.Builder.fromStruct sb

def Message.Builder.clearCall (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initCall (b : Message.Builder) : Capnp.BuilderM Call.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 2)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 3 3
  return Call.Builder.fromStruct sb

def Message.Builder.clear_return (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.init_return (b : Message.Builder) : Capnp.BuilderM Return.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 3)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 2 1
  return Return.Builder.fromStruct sb

def Message.Builder.clearFinish (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initFinish (b : Message.Builder) : Capnp.BuilderM Finish.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 4)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 0
  return Finish.Builder.fromStruct sb

def Message.Builder.clearResolve (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initResolve (b : Message.Builder) : Capnp.BuilderM Resolve.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 5)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return Resolve.Builder.fromStruct sb

def Message.Builder.clearRelease (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initRelease (b : Message.Builder) : Capnp.BuilderM Release.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 6)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 0
  return Release.Builder.fromStruct sb

def Message.Builder.clearObsoleteSave (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.getObsoleteSave (b : Message.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0

def Message.Builder.clearBootstrap (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initBootstrap (b : Message.Builder) : Capnp.BuilderM Bootstrap.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 8)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return Bootstrap.Builder.fromStruct sb

def Message.Builder.clearObsoleteDelete (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.getObsoleteDelete (b : Message.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0

def Message.Builder.clearProvide (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initProvide (b : Message.Builder) : Capnp.BuilderM Provide.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 10)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 2
  return Provide.Builder.fromStruct sb

def Message.Builder.clearAccept (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initAccept (b : Message.Builder) : Capnp.BuilderM Accept.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 11)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 2
  return Accept.Builder.fromStruct sb

def Message.Builder.clearJoin (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initJoin (b : Message.Builder) : Capnp.BuilderM Join.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 12)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 2
  return Join.Builder.fromStruct sb

def Message.Builder.clearDisembargo (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initDisembargo (b : Message.Builder) : Capnp.BuilderM Disembargo.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 13)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 2
  return Disembargo.Builder.fromStruct sb

def Message.Builder.clearThirdPartyAnswer (b : Message.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Message.Builder.initThirdPartyAnswer (b : Message.Builder) : Capnp.BuilderM ThirdPartyAnswer.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 14)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return ThirdPartyAnswer.Builder.fromStruct sb


def Bootstrap.Reader.getQuestionId (r : Bootstrap.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Bootstrap.Reader.getQuestionIdChecked (r : Bootstrap.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Bootstrap.Reader.getDeprecatedObjectId (r : Bootstrap.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def Bootstrap.Reader.getDeprecatedObjectIdChecked (r : Bootstrap.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def Bootstrap.Reader.hasDeprecatedObjectId (r : Bootstrap.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)

def Bootstrap.initRoot : Capnp.BuilderM Bootstrap.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def Bootstrap.Builder.setQuestionId (b : Bootstrap.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Bootstrap.Builder.clearDeprecatedObjectId (b : Bootstrap.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Bootstrap.Builder.getDeprecatedObjectId (b : Bootstrap.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0


def Call.Reader.getQuestionId (r : Call.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Call.Reader.getQuestionIdChecked (r : Call.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Call.Reader.getTarget (r : Call.Reader) : MessageTarget.Reader := MessageTarget.read (Capnp.getPointer r.struct 0)
def Call.Reader.getTargetChecked (r : Call.Reader) : Except String (MessageTarget.Reader) := MessageTarget.readChecked (Capnp.getPointer r.struct 0)
def Call.Reader.hasTarget (r : Call.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Call.Reader.getInterfaceId (r : Call.Reader) : UInt64 := Capnp.getUInt64 r.struct 8
def Call.Reader.getInterfaceIdChecked (r : Call.Reader) : Except String (UInt64) := pure (Capnp.getUInt64 r.struct 8)

def Call.Reader.getMethodId (r : Call.Reader) : UInt16 := Capnp.getUInt16 r.struct 4
def Call.Reader.getMethodIdChecked (r : Call.Reader) : Except String (UInt16) := pure (Capnp.getUInt16 r.struct 4)

def Call.Reader.getParams (r : Call.Reader) : Payload.Reader := Payload.read (Capnp.getPointer r.struct 1)
def Call.Reader.getParamsChecked (r : Call.Reader) : Except String (Payload.Reader) := Payload.readChecked (Capnp.getPointer r.struct 1)
def Call.Reader.hasParams (r : Call.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 1)


def Call.Reader.getSendResultsTo (r : Call.Reader) : Call.SendResultsToGroup.Reader := Call.SendResultsToGroup.fromStruct r.struct
def Call.Reader.getSendResultsToChecked (r : Call.Reader) : Except String (Call.SendResultsToGroup.Reader) := pure (Call.SendResultsToGroup.fromStruct r.struct)

def Call.Reader.getAllowThirdPartyTailCall (r : Call.Reader) : Bool := Capnp.getBool r.struct 128
def Call.Reader.getAllowThirdPartyTailCallChecked (r : Call.Reader) : Except String (Bool) := pure (Capnp.getBool r.struct 128)

def Call.Reader.getNoPromisePipelining (r : Call.Reader) : Bool := Capnp.getBool r.struct 129
def Call.Reader.getNoPromisePipeliningChecked (r : Call.Reader) : Except String (Bool) := pure (Capnp.getBool r.struct 129)

def Call.Reader.getOnlyPromisePipeline (r : Call.Reader) : Bool := Capnp.getBool r.struct 130
def Call.Reader.getOnlyPromisePipelineChecked (r : Call.Reader) : Except String (Bool) := pure (Capnp.getBool r.struct 130)
def Call.initRoot : Capnp.BuilderM Call.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 3 3
  return { struct := sb }

def Call.Builder.setQuestionId (b : Call.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Call.Builder.clearTarget (b : Call.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Call.Builder.initTarget (b : Call.Builder) : Capnp.BuilderM MessageTarget.Builder := do
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return MessageTarget.Builder.fromStruct sb

def Call.Builder.setInterfaceId (b : Call.Builder) (v : UInt64) : Capnp.BuilderM Unit := do
  Capnp.setUInt64 b.struct 8 v

def Call.Builder.setMethodId (b : Call.Builder) (v : UInt16) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 4 v

def Call.Builder.clearParams (b : Call.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 1)

def Call.Builder.initParams (b : Call.Builder) : Capnp.BuilderM Payload.Builder := do
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 1) 0 2
  return Payload.Builder.fromStruct sb

def Call.Builder.getSendResultsTo (b : Call.Builder) : Call.SendResultsToGroup.Builder := Call.SendResultsToGroup.Builder.fromStruct b.struct

def Call.Builder.setAllowThirdPartyTailCall (b : Call.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBool b.struct 128 v

def Call.Builder.setNoPromisePipelining (b : Call.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBool b.struct 129 v

def Call.Builder.setOnlyPromisePipeline (b : Call.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBool b.struct 130 v


def Call.SendResultsToGroup.Reader.getCaller (_r : Call.SendResultsToGroup.Reader) : Unit := ()
def Call.SendResultsToGroup.Reader.getCallerChecked (_r : Call.SendResultsToGroup.Reader) : Except String (Unit) := pure ()

def Call.SendResultsToGroup.Reader.getYourself (_r : Call.SendResultsToGroup.Reader) : Unit := ()
def Call.SendResultsToGroup.Reader.getYourselfChecked (_r : Call.SendResultsToGroup.Reader) : Except String (Unit) := pure ()

def Call.SendResultsToGroup.Reader.getThirdParty (r : Call.SendResultsToGroup.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 2
def Call.SendResultsToGroup.Reader.getThirdPartyChecked (r : Call.SendResultsToGroup.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 2)
def Call.SendResultsToGroup.Reader.hasThirdParty (r : Call.SendResultsToGroup.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 2)


def Call.SendResultsToGroup.Reader.which (r : Call.SendResultsToGroup.Reader) : Call.SendResultsToGroup.Which :=
  let disc := Capnp.getUInt16 r.struct 6
  match disc with
  | 0 => Call.SendResultsToGroup.Which.caller (r.getCaller)
  | 1 => Call.SendResultsToGroup.Which.yourself (r.getYourself)
  | 2 => Call.SendResultsToGroup.Which.thirdParty (r.getThirdParty)
  | _ => Call.SendResultsToGroup.Which.none

def Call.SendResultsToGroup.Reader.whichChecked (r : Call.SendResultsToGroup.Reader) : Except String Call.SendResultsToGroup.Which := do
  let disc := Capnp.getUInt16 r.struct 6
  match disc with
  | 0 => do
    let v ← r.getCallerChecked
    return Call.SendResultsToGroup.Which.caller v
  | 1 => do
    let v ← r.getYourselfChecked
    return Call.SendResultsToGroup.Which.yourself v
  | 2 => do
    let v ← r.getThirdPartyChecked
    return Call.SendResultsToGroup.Which.thirdParty v
  | _ => return Call.SendResultsToGroup.Which.none
def Call.SendResultsToGroup.initRoot : Capnp.BuilderM Call.SendResultsToGroup.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 3 3
  return { struct := sb }

def Call.SendResultsToGroup.Builder.setCaller (b : Call.SendResultsToGroup.Builder) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 6 (UInt16.ofNat 0)
  pure ()

def Call.SendResultsToGroup.Builder.setYourself (b : Call.SendResultsToGroup.Builder) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 6 (UInt16.ofNat 1)
  pure ()

def Call.SendResultsToGroup.Builder.clearThirdParty (b : Call.SendResultsToGroup.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 2)

def Call.SendResultsToGroup.Builder.getThirdParty (b : Call.SendResultsToGroup.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 2


def Return.Reader.getAnswerId (r : Return.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Return.Reader.getAnswerIdChecked (r : Return.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Return.Reader.getReleaseParamCaps (r : Return.Reader) : Bool := Capnp.getBoolMasked r.struct 32 true
def Return.Reader.getReleaseParamCapsChecked (r : Return.Reader) : Except String (Bool) := pure (Capnp.getBoolMasked r.struct 32 true)

def Return.Reader.getResults (r : Return.Reader) : Payload.Reader := Payload.read (Capnp.getPointer r.struct 0)
def Return.Reader.getResultsChecked (r : Return.Reader) : Except String (Payload.Reader) := Payload.readChecked (Capnp.getPointer r.struct 0)
def Return.Reader.hasResults (r : Return.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Return.Reader.getException (r : Return.Reader) : Exception.Reader := Exception.read (Capnp.getPointer r.struct 0)
def Return.Reader.getExceptionChecked (r : Return.Reader) : Except String (Exception.Reader) := Exception.readChecked (Capnp.getPointer r.struct 0)
def Return.Reader.hasException (r : Return.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Return.Reader.getCanceled (_r : Return.Reader) : Unit := ()
def Return.Reader.getCanceledChecked (_r : Return.Reader) : Except String (Unit) := pure ()

def Return.Reader.getResultsSentElsewhere (_r : Return.Reader) : Unit := ()
def Return.Reader.getResultsSentElsewhereChecked (_r : Return.Reader) : Except String (Unit) := pure ()

def Return.Reader.getTakeFromOtherQuestion (r : Return.Reader) : UInt32 := Capnp.getUInt32 r.struct 8
def Return.Reader.getTakeFromOtherQuestionChecked (r : Return.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 8)

def Return.Reader.getAwaitFromThirdParty (r : Return.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def Return.Reader.getAwaitFromThirdPartyChecked (r : Return.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def Return.Reader.hasAwaitFromThirdParty (r : Return.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Return.Reader.getNoFinishNeeded (r : Return.Reader) : Bool := Capnp.getBool r.struct 33
def Return.Reader.getNoFinishNeededChecked (r : Return.Reader) : Except String (Bool) := pure (Capnp.getBool r.struct 33)

def Return.Reader.which (r : Return.Reader) : Return.Which :=
  let disc := Capnp.getUInt16 r.struct 6
  match disc with
  | 0 => Return.Which.results (r.getResults)
  | 1 => Return.Which.exception (r.getException)
  | 2 => Return.Which.canceled (r.getCanceled)
  | 3 => Return.Which.resultsSentElsewhere (r.getResultsSentElsewhere)
  | 4 => Return.Which.takeFromOtherQuestion (r.getTakeFromOtherQuestion)
  | 5 => Return.Which.awaitFromThirdParty (r.getAwaitFromThirdParty)
  | _ => Return.Which.none

def Return.Reader.whichChecked (r : Return.Reader) : Except String Return.Which := do
  let disc := Capnp.getUInt16 r.struct 6
  match disc with
  | 0 => do
    let v ← r.getResultsChecked
    return Return.Which.results v
  | 1 => do
    let v ← r.getExceptionChecked
    return Return.Which.exception v
  | 2 => do
    let v ← r.getCanceledChecked
    return Return.Which.canceled v
  | 3 => do
    let v ← r.getResultsSentElsewhereChecked
    return Return.Which.resultsSentElsewhere v
  | 4 => do
    let v ← r.getTakeFromOtherQuestionChecked
    return Return.Which.takeFromOtherQuestion v
  | 5 => do
    let v ← r.getAwaitFromThirdPartyChecked
    return Return.Which.awaitFromThirdParty v
  | _ => return Return.Which.none
def Return.initRoot : Capnp.BuilderM Return.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 2 1
  return { struct := sb }

def Return.Builder.setAnswerId (b : Return.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Return.Builder.setReleaseParamCaps (b : Return.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBoolMasked b.struct 32 true v

def Return.Builder.clearResults (b : Return.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Return.Builder.initResults (b : Return.Builder) : Capnp.BuilderM Payload.Builder := do
  Capnp.setUInt16 b.struct 6 (UInt16.ofNat 0)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 0 2
  return Payload.Builder.fromStruct sb

def Return.Builder.clearException (b : Return.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Return.Builder.initException (b : Return.Builder) : Capnp.BuilderM Exception.Builder := do
  Capnp.setUInt16 b.struct 6 (UInt16.ofNat 1)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 3
  return Exception.Builder.fromStruct sb

def Return.Builder.setCanceled (b : Return.Builder) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 6 (UInt16.ofNat 2)
  pure ()

def Return.Builder.setResultsSentElsewhere (b : Return.Builder) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 6 (UInt16.ofNat 3)
  pure ()

def Return.Builder.setTakeFromOtherQuestion (b : Return.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 6 (UInt16.ofNat 4)
  Capnp.setUInt32 b.struct 8 v

def Return.Builder.clearAwaitFromThirdParty (b : Return.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Return.Builder.getAwaitFromThirdParty (b : Return.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0

def Return.Builder.setNoFinishNeeded (b : Return.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBool b.struct 33 v


def Finish.Reader.getQuestionId (r : Finish.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Finish.Reader.getQuestionIdChecked (r : Finish.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Finish.Reader.getReleaseResultCaps (r : Finish.Reader) : Bool := Capnp.getBoolMasked r.struct 32 true
def Finish.Reader.getReleaseResultCapsChecked (r : Finish.Reader) : Except String (Bool) := pure (Capnp.getBoolMasked r.struct 32 true)

def Finish.Reader.getRequireEarlyCancellationWorkaround (r : Finish.Reader) : Bool := Capnp.getBoolMasked r.struct 33 true
def Finish.Reader.getRequireEarlyCancellationWorkaroundChecked (r : Finish.Reader) : Except String (Bool) := pure (Capnp.getBoolMasked r.struct 33 true)
def Finish.initRoot : Capnp.BuilderM Finish.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 0
  return { struct := sb }

def Finish.Builder.setQuestionId (b : Finish.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Finish.Builder.setReleaseResultCaps (b : Finish.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBoolMasked b.struct 32 true v

def Finish.Builder.setRequireEarlyCancellationWorkaround (b : Finish.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBoolMasked b.struct 33 true v


def Resolve.Reader.getPromiseId (r : Resolve.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Resolve.Reader.getPromiseIdChecked (r : Resolve.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Resolve.Reader.getCap (r : Resolve.Reader) : CapDescriptor.Reader := CapDescriptor.read (Capnp.getPointer r.struct 0)
def Resolve.Reader.getCapChecked (r : Resolve.Reader) : Except String (CapDescriptor.Reader) := CapDescriptor.readChecked (Capnp.getPointer r.struct 0)
def Resolve.Reader.hasCap (r : Resolve.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Resolve.Reader.getException (r : Resolve.Reader) : Exception.Reader := Exception.read (Capnp.getPointer r.struct 0)
def Resolve.Reader.getExceptionChecked (r : Resolve.Reader) : Except String (Exception.Reader) := Exception.readChecked (Capnp.getPointer r.struct 0)
def Resolve.Reader.hasException (r : Resolve.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Resolve.Reader.which (r : Resolve.Reader) : Resolve.Which :=
  let disc := Capnp.getUInt16 r.struct 4
  match disc with
  | 0 => Resolve.Which.cap (r.getCap)
  | 1 => Resolve.Which.exception (r.getException)
  | _ => Resolve.Which.none

def Resolve.Reader.whichChecked (r : Resolve.Reader) : Except String Resolve.Which := do
  let disc := Capnp.getUInt16 r.struct 4
  match disc with
  | 0 => do
    let v ← r.getCapChecked
    return Resolve.Which.cap v
  | 1 => do
    let v ← r.getExceptionChecked
    return Resolve.Which.exception v
  | _ => return Resolve.Which.none
def Resolve.initRoot : Capnp.BuilderM Resolve.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def Resolve.Builder.setPromiseId (b : Resolve.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Resolve.Builder.clearCap (b : Resolve.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Resolve.Builder.initCap (b : Resolve.Builder) : Capnp.BuilderM CapDescriptor.Builder := do
  Capnp.setUInt16 b.struct 4 (UInt16.ofNat 0)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return CapDescriptor.Builder.fromStruct sb

def Resolve.Builder.clearException (b : Resolve.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Resolve.Builder.initException (b : Resolve.Builder) : Capnp.BuilderM Exception.Builder := do
  Capnp.setUInt16 b.struct 4 (UInt16.ofNat 1)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 3
  return Exception.Builder.fromStruct sb


def Release.Reader.getId (r : Release.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Release.Reader.getIdChecked (r : Release.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Release.Reader.getReferenceCount (r : Release.Reader) : UInt32 := Capnp.getUInt32 r.struct 4
def Release.Reader.getReferenceCountChecked (r : Release.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 4)
def Release.initRoot : Capnp.BuilderM Release.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 0
  return { struct := sb }

def Release.Builder.setId (b : Release.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Release.Builder.setReferenceCount (b : Release.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 4 v


def Disembargo.Reader.getTarget (r : Disembargo.Reader) : MessageTarget.Reader := MessageTarget.read (Capnp.getPointer r.struct 0)
def Disembargo.Reader.getTargetChecked (r : Disembargo.Reader) : Except String (MessageTarget.Reader) := MessageTarget.readChecked (Capnp.getPointer r.struct 0)
def Disembargo.Reader.hasTarget (r : Disembargo.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Disembargo.Reader.getContext (r : Disembargo.Reader) : Disembargo.ContextGroup.Reader := Disembargo.ContextGroup.fromStruct r.struct
def Disembargo.Reader.getContextChecked (r : Disembargo.Reader) : Except String (Disembargo.ContextGroup.Reader) := pure (Disembargo.ContextGroup.fromStruct r.struct)
def Disembargo.initRoot : Capnp.BuilderM Disembargo.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 2
  return { struct := sb }

def Disembargo.Builder.clearTarget (b : Disembargo.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Disembargo.Builder.initTarget (b : Disembargo.Builder) : Capnp.BuilderM MessageTarget.Builder := do
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return MessageTarget.Builder.fromStruct sb

def Disembargo.Builder.getContext (b : Disembargo.Builder) : Disembargo.ContextGroup.Builder := Disembargo.ContextGroup.Builder.fromStruct b.struct


def Disembargo.ContextGroup.Reader.getSenderLoopback (r : Disembargo.ContextGroup.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Disembargo.ContextGroup.Reader.getSenderLoopbackChecked (r : Disembargo.ContextGroup.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Disembargo.ContextGroup.Reader.getReceiverLoopback (r : Disembargo.ContextGroup.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Disembargo.ContextGroup.Reader.getReceiverLoopbackChecked (r : Disembargo.ContextGroup.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Disembargo.ContextGroup.Reader.getAccept (r : Disembargo.ContextGroup.Reader) : Capnp.Data := Capnp.readData (Capnp.getPointer r.struct 1)
def Disembargo.ContextGroup.Reader.getAcceptChecked (r : Disembargo.ContextGroup.Reader) : Except String (Capnp.Data) := Capnp.readDataChecked (Capnp.getPointer r.struct 1)
def Disembargo.ContextGroup.Reader.getAcceptView (r : Disembargo.ContextGroup.Reader) : Capnp.DataView := Capnp.readDataView (Capnp.getPointer r.struct 1)
def Disembargo.ContextGroup.Reader.getAcceptViewChecked (r : Disembargo.ContextGroup.Reader) : Except String Capnp.DataView := Capnp.readDataViewChecked (Capnp.getPointer r.struct 1)

def Disembargo.ContextGroup.Reader.hasAccept (r : Disembargo.ContextGroup.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 1)


def Disembargo.ContextGroup.Reader.which (r : Disembargo.ContextGroup.Reader) : Disembargo.ContextGroup.Which :=
  let disc := Capnp.getUInt16 r.struct 4
  match disc with
  | 0 => Disembargo.ContextGroup.Which.senderLoopback (r.getSenderLoopback)
  | 1 => Disembargo.ContextGroup.Which.receiverLoopback (r.getReceiverLoopback)
  | 2 => Disembargo.ContextGroup.Which.accept (r.getAccept)
  | _ => Disembargo.ContextGroup.Which.none

def Disembargo.ContextGroup.Reader.whichChecked (r : Disembargo.ContextGroup.Reader) : Except String Disembargo.ContextGroup.Which := do
  let disc := Capnp.getUInt16 r.struct 4
  match disc with
  | 0 => do
    let v ← r.getSenderLoopbackChecked
    return Disembargo.ContextGroup.Which.senderLoopback v
  | 1 => do
    let v ← r.getReceiverLoopbackChecked
    return Disembargo.ContextGroup.Which.receiverLoopback v
  | 2 => do
    let v ← r.getAcceptChecked
    return Disembargo.ContextGroup.Which.accept v
  | _ => return Disembargo.ContextGroup.Which.none
def Disembargo.ContextGroup.initRoot : Capnp.BuilderM Disembargo.ContextGroup.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 2
  return { struct := sb }

def Disembargo.ContextGroup.Builder.setSenderLoopback (b : Disembargo.ContextGroup.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 4 (UInt16.ofNat 0)
  Capnp.setUInt32 b.struct 0 v

def Disembargo.ContextGroup.Builder.setReceiverLoopback (b : Disembargo.ContextGroup.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 4 (UInt16.ofNat 1)
  Capnp.setUInt32 b.struct 0 v

def Disembargo.ContextGroup.Builder.clearAccept (b : Disembargo.ContextGroup.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 1)

def Disembargo.ContextGroup.Builder.setAccept (b : Disembargo.ContextGroup.Builder) (v : Capnp.Data) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 4 (UInt16.ofNat 2)
  Capnp.writeData (Capnp.getPointerBuilder b.struct 1) v


def Provide.Reader.getQuestionId (r : Provide.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Provide.Reader.getQuestionIdChecked (r : Provide.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Provide.Reader.getTarget (r : Provide.Reader) : MessageTarget.Reader := MessageTarget.read (Capnp.getPointer r.struct 0)
def Provide.Reader.getTargetChecked (r : Provide.Reader) : Except String (MessageTarget.Reader) := MessageTarget.readChecked (Capnp.getPointer r.struct 0)
def Provide.Reader.hasTarget (r : Provide.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Provide.Reader.getRecipient (r : Provide.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 1
def Provide.Reader.getRecipientChecked (r : Provide.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 1)
def Provide.Reader.hasRecipient (r : Provide.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 1)

def Provide.initRoot : Capnp.BuilderM Provide.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 2
  return { struct := sb }

def Provide.Builder.setQuestionId (b : Provide.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Provide.Builder.clearTarget (b : Provide.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Provide.Builder.initTarget (b : Provide.Builder) : Capnp.BuilderM MessageTarget.Builder := do
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return MessageTarget.Builder.fromStruct sb

def Provide.Builder.clearRecipient (b : Provide.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 1)

def Provide.Builder.getRecipient (b : Provide.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 1


def Accept.Reader.getQuestionId (r : Accept.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Accept.Reader.getQuestionIdChecked (r : Accept.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Accept.Reader.getProvision (r : Accept.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def Accept.Reader.getProvisionChecked (r : Accept.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def Accept.Reader.hasProvision (r : Accept.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Accept.Reader.getEmbargo (r : Accept.Reader) : Capnp.Data := Capnp.readData (Capnp.getPointer r.struct 1)
def Accept.Reader.getEmbargoChecked (r : Accept.Reader) : Except String (Capnp.Data) := Capnp.readDataChecked (Capnp.getPointer r.struct 1)
def Accept.Reader.getEmbargoView (r : Accept.Reader) : Capnp.DataView := Capnp.readDataView (Capnp.getPointer r.struct 1)
def Accept.Reader.getEmbargoViewChecked (r : Accept.Reader) : Except String Capnp.DataView := Capnp.readDataViewChecked (Capnp.getPointer r.struct 1)

def Accept.Reader.hasEmbargo (r : Accept.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 1)

def Accept.initRoot : Capnp.BuilderM Accept.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 2
  return { struct := sb }

def Accept.Builder.setQuestionId (b : Accept.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Accept.Builder.clearProvision (b : Accept.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Accept.Builder.getProvision (b : Accept.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0

def Accept.Builder.clearEmbargo (b : Accept.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 1)

def Accept.Builder.setEmbargo (b : Accept.Builder) (v : Capnp.Data) : Capnp.BuilderM Unit := do
  Capnp.writeData (Capnp.getPointerBuilder b.struct 1) v


def ThirdPartyAnswer.Reader.getCompletion (r : ThirdPartyAnswer.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def ThirdPartyAnswer.Reader.getCompletionChecked (r : ThirdPartyAnswer.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def ThirdPartyAnswer.Reader.hasCompletion (r : ThirdPartyAnswer.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def ThirdPartyAnswer.Reader.getAnswerId (r : ThirdPartyAnswer.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def ThirdPartyAnswer.Reader.getAnswerIdChecked (r : ThirdPartyAnswer.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)
def ThirdPartyAnswer.initRoot : Capnp.BuilderM ThirdPartyAnswer.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def ThirdPartyAnswer.Builder.clearCompletion (b : ThirdPartyAnswer.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def ThirdPartyAnswer.Builder.getCompletion (b : ThirdPartyAnswer.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0

def ThirdPartyAnswer.Builder.setAnswerId (b : ThirdPartyAnswer.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v


def Join.Reader.getQuestionId (r : Join.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def Join.Reader.getQuestionIdChecked (r : Join.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def Join.Reader.getTarget (r : Join.Reader) : MessageTarget.Reader := MessageTarget.read (Capnp.getPointer r.struct 0)
def Join.Reader.getTargetChecked (r : Join.Reader) : Except String (MessageTarget.Reader) := MessageTarget.readChecked (Capnp.getPointer r.struct 0)
def Join.Reader.hasTarget (r : Join.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Join.Reader.getKeyPart (r : Join.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 1
def Join.Reader.getKeyPartChecked (r : Join.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 1)
def Join.Reader.hasKeyPart (r : Join.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 1)

def Join.initRoot : Capnp.BuilderM Join.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 2
  return { struct := sb }

def Join.Builder.setQuestionId (b : Join.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def Join.Builder.clearTarget (b : Join.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Join.Builder.initTarget (b : Join.Builder) : Capnp.BuilderM MessageTarget.Builder := do
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return MessageTarget.Builder.fromStruct sb

def Join.Builder.clearKeyPart (b : Join.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 1)

def Join.Builder.getKeyPart (b : Join.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 1


def MessageTarget.Reader.getImportedCap (r : MessageTarget.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def MessageTarget.Reader.getImportedCapChecked (r : MessageTarget.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def MessageTarget.Reader.getPromisedAnswer (r : MessageTarget.Reader) : PromisedAnswer.Reader := PromisedAnswer.read (Capnp.getPointer r.struct 0)
def MessageTarget.Reader.getPromisedAnswerChecked (r : MessageTarget.Reader) : Except String (PromisedAnswer.Reader) := PromisedAnswer.readChecked (Capnp.getPointer r.struct 0)
def MessageTarget.Reader.hasPromisedAnswer (r : MessageTarget.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def MessageTarget.Reader.which (r : MessageTarget.Reader) : MessageTarget.Which :=
  let disc := Capnp.getUInt16 r.struct 4
  match disc with
  | 0 => MessageTarget.Which.importedCap (r.getImportedCap)
  | 1 => MessageTarget.Which.promisedAnswer (r.getPromisedAnswer)
  | _ => MessageTarget.Which.none

def MessageTarget.Reader.whichChecked (r : MessageTarget.Reader) : Except String MessageTarget.Which := do
  let disc := Capnp.getUInt16 r.struct 4
  match disc with
  | 0 => do
    let v ← r.getImportedCapChecked
    return MessageTarget.Which.importedCap v
  | 1 => do
    let v ← r.getPromisedAnswerChecked
    return MessageTarget.Which.promisedAnswer v
  | _ => return MessageTarget.Which.none
def MessageTarget.initRoot : Capnp.BuilderM MessageTarget.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def MessageTarget.Builder.setImportedCap (b : MessageTarget.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 4 (UInt16.ofNat 0)
  Capnp.setUInt32 b.struct 0 v

def MessageTarget.Builder.clearPromisedAnswer (b : MessageTarget.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def MessageTarget.Builder.initPromisedAnswer (b : MessageTarget.Builder) : Capnp.BuilderM PromisedAnswer.Builder := do
  Capnp.setUInt16 b.struct 4 (UInt16.ofNat 1)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return PromisedAnswer.Builder.fromStruct sb


def Payload.Reader.getContent (r : Payload.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def Payload.Reader.getContentChecked (r : Payload.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def Payload.Reader.hasContent (r : Payload.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Payload.Reader.getCapTable (r : Payload.Reader) : Capnp.ListReader CapDescriptor.Reader := Capnp.ListReader.map CapDescriptor.fromStruct (Capnp.readListStructReader (Capnp.getPointer r.struct 1))
def Payload.Reader.getCapTableChecked (r : Payload.Reader) : Except String (Capnp.ListReader CapDescriptor.Reader) := do
  let r ← Capnp.readListStructCheckedReader (Capnp.getPointer r.struct 1)
  return Capnp.ListReader.map CapDescriptor.fromStruct r
def Payload.Reader.hasCapTable (r : Payload.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 1)

def Payload.initRoot : Capnp.BuilderM Payload.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 0 2
  return { struct := sb }

def Payload.Builder.clearContent (b : Payload.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Payload.Builder.getContent (b : Payload.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0

def Payload.Builder.clearCapTable (b : Payload.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 1)

def Payload.Builder.initCapTable (b : Payload.Builder) (n : Nat) : Capnp.BuilderM (Array CapDescriptor.Builder) := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 1) 1 1 n
  return Array.map CapDescriptor.Builder.fromStruct (Capnp.listStructBuilders lb)
def Payload.Builder.setCapTableFromReaders (b : Payload.Builder) (v : Array CapDescriptor.Reader) : Capnp.BuilderM Unit := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 1) 1 1 (v).size
  let builders := Capnp.listStructBuilders lb
  let emptySb : Capnp.StructBuilder :=
    { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
  let mut i_128 := 0
  for elem_129 in (v) do
    let sb := builders.getD i_128 emptySb
    Capnp.copyStruct sb elem_129.struct
    i_128 := i_128 + 1


def CapDescriptor.Reader.getNone (_r : CapDescriptor.Reader) : Unit := ()
def CapDescriptor.Reader.getNoneChecked (_r : CapDescriptor.Reader) : Except String (Unit) := pure ()

def CapDescriptor.Reader.getSenderHosted (r : CapDescriptor.Reader) : UInt32 := Capnp.getUInt32 r.struct 4
def CapDescriptor.Reader.getSenderHostedChecked (r : CapDescriptor.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 4)

def CapDescriptor.Reader.getSenderPromise (r : CapDescriptor.Reader) : UInt32 := Capnp.getUInt32 r.struct 4
def CapDescriptor.Reader.getSenderPromiseChecked (r : CapDescriptor.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 4)

def CapDescriptor.Reader.getReceiverHosted (r : CapDescriptor.Reader) : UInt32 := Capnp.getUInt32 r.struct 4
def CapDescriptor.Reader.getReceiverHostedChecked (r : CapDescriptor.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 4)

def CapDescriptor.Reader.getReceiverAnswer (r : CapDescriptor.Reader) : PromisedAnswer.Reader := PromisedAnswer.read (Capnp.getPointer r.struct 0)
def CapDescriptor.Reader.getReceiverAnswerChecked (r : CapDescriptor.Reader) : Except String (PromisedAnswer.Reader) := PromisedAnswer.readChecked (Capnp.getPointer r.struct 0)
def CapDescriptor.Reader.hasReceiverAnswer (r : CapDescriptor.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def CapDescriptor.Reader.getThirdPartyHosted (r : CapDescriptor.Reader) : ThirdPartyCapDescriptor.Reader := ThirdPartyCapDescriptor.read (Capnp.getPointer r.struct 0)
def CapDescriptor.Reader.getThirdPartyHostedChecked (r : CapDescriptor.Reader) : Except String (ThirdPartyCapDescriptor.Reader) := ThirdPartyCapDescriptor.readChecked (Capnp.getPointer r.struct 0)
def CapDescriptor.Reader.hasThirdPartyHosted (r : CapDescriptor.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def CapDescriptor.Reader.getAttachedFd (r : CapDescriptor.Reader) : UInt8 := Capnp.getUInt8Masked r.struct 2 (UInt8.ofNat 255)
def CapDescriptor.Reader.getAttachedFdChecked (r : CapDescriptor.Reader) : Except String (UInt8) := pure (Capnp.getUInt8Masked r.struct 2 (UInt8.ofNat 255))

def CapDescriptor.Reader.which (r : CapDescriptor.Reader) : CapDescriptor.Which :=
  let disc := Capnp.getUInt16 r.struct 0
  match disc with
  | 0 => CapDescriptor.Which.none (r.getNone)
  | 1 => CapDescriptor.Which.senderHosted (r.getSenderHosted)
  | 2 => CapDescriptor.Which.senderPromise (r.getSenderPromise)
  | 3 => CapDescriptor.Which.receiverHosted (r.getReceiverHosted)
  | 4 => CapDescriptor.Which.receiverAnswer (r.getReceiverAnswer)
  | 5 => CapDescriptor.Which.thirdPartyHosted (r.getThirdPartyHosted)
  | _ => CapDescriptor.Which.none_

def CapDescriptor.Reader.whichChecked (r : CapDescriptor.Reader) : Except String CapDescriptor.Which := do
  let disc := Capnp.getUInt16 r.struct 0
  match disc with
  | 0 => do
    let v ← r.getNoneChecked
    return CapDescriptor.Which.none v
  | 1 => do
    let v ← r.getSenderHostedChecked
    return CapDescriptor.Which.senderHosted v
  | 2 => do
    let v ← r.getSenderPromiseChecked
    return CapDescriptor.Which.senderPromise v
  | 3 => do
    let v ← r.getReceiverHostedChecked
    return CapDescriptor.Which.receiverHosted v
  | 4 => do
    let v ← r.getReceiverAnswerChecked
    return CapDescriptor.Which.receiverAnswer v
  | 5 => do
    let v ← r.getThirdPartyHostedChecked
    return CapDescriptor.Which.thirdPartyHosted v
  | _ => return CapDescriptor.Which.none_
def CapDescriptor.initRoot : Capnp.BuilderM CapDescriptor.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def CapDescriptor.Builder.setNone (b : CapDescriptor.Builder) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 0)
  pure ()

def CapDescriptor.Builder.setSenderHosted (b : CapDescriptor.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 1)
  Capnp.setUInt32 b.struct 4 v

def CapDescriptor.Builder.setSenderPromise (b : CapDescriptor.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 2)
  Capnp.setUInt32 b.struct 4 v

def CapDescriptor.Builder.setReceiverHosted (b : CapDescriptor.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 3)
  Capnp.setUInt32 b.struct 4 v

def CapDescriptor.Builder.clearReceiverAnswer (b : CapDescriptor.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def CapDescriptor.Builder.initReceiverAnswer (b : CapDescriptor.Builder) : Capnp.BuilderM PromisedAnswer.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 4)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return PromisedAnswer.Builder.fromStruct sb

def CapDescriptor.Builder.clearThirdPartyHosted (b : CapDescriptor.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def CapDescriptor.Builder.initThirdPartyHosted (b : CapDescriptor.Builder) : Capnp.BuilderM ThirdPartyCapDescriptor.Builder := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 5)
  let sb ← Capnp.initStructPointer (Capnp.getPointerBuilder b.struct 0) 1 1
  return ThirdPartyCapDescriptor.Builder.fromStruct sb

def CapDescriptor.Builder.setAttachedFd (b : CapDescriptor.Builder) (v : UInt8) : Capnp.BuilderM Unit := do
  Capnp.setUInt8Masked b.struct 2 (UInt8.ofNat 255) v


def PromisedAnswer.Reader.getQuestionId (r : PromisedAnswer.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def PromisedAnswer.Reader.getQuestionIdChecked (r : PromisedAnswer.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def PromisedAnswer.Reader.getTransform (r : PromisedAnswer.Reader) : Capnp.ListReader PromisedAnswer.Op.Reader := Capnp.ListReader.map PromisedAnswer.Op.fromStruct (Capnp.readListStructReader (Capnp.getPointer r.struct 0))
def PromisedAnswer.Reader.getTransformChecked (r : PromisedAnswer.Reader) : Except String (Capnp.ListReader PromisedAnswer.Op.Reader) := do
  let r ← Capnp.readListStructCheckedReader (Capnp.getPointer r.struct 0)
  return Capnp.ListReader.map PromisedAnswer.Op.fromStruct r
def PromisedAnswer.Reader.hasTransform (r : PromisedAnswer.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)

def PromisedAnswer.initRoot : Capnp.BuilderM PromisedAnswer.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def PromisedAnswer.Builder.setQuestionId (b : PromisedAnswer.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def PromisedAnswer.Builder.clearTransform (b : PromisedAnswer.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def PromisedAnswer.Builder.initTransform (b : PromisedAnswer.Builder) (n : Nat) : Capnp.BuilderM (Array PromisedAnswer.Op.Builder) := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 0) 1 0 n
  return Array.map PromisedAnswer.Op.Builder.fromStruct (Capnp.listStructBuilders lb)
def PromisedAnswer.Builder.setTransformFromReaders (b : PromisedAnswer.Builder) (v : Array PromisedAnswer.Op.Reader) : Capnp.BuilderM Unit := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 0) 1 0 (v).size
  let builders := Capnp.listStructBuilders lb
  let emptySb : Capnp.StructBuilder :=
    { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
  let mut i_130 := 0
  for elem_131 in (v) do
    let sb := builders.getD i_130 emptySb
    Capnp.copyStruct sb elem_131.struct
    i_130 := i_130 + 1


def PromisedAnswer.Op.Reader.getNoop (_r : PromisedAnswer.Op.Reader) : Unit := ()
def PromisedAnswer.Op.Reader.getNoopChecked (_r : PromisedAnswer.Op.Reader) : Except String (Unit) := pure ()

def PromisedAnswer.Op.Reader.getGetPointerField (r : PromisedAnswer.Op.Reader) : UInt16 := Capnp.getUInt16 r.struct 2
def PromisedAnswer.Op.Reader.getGetPointerFieldChecked (r : PromisedAnswer.Op.Reader) : Except String (UInt16) := pure (Capnp.getUInt16 r.struct 2)

def PromisedAnswer.Op.Reader.which (r : PromisedAnswer.Op.Reader) : PromisedAnswer.Op.Which :=
  let disc := Capnp.getUInt16 r.struct 0
  match disc with
  | 0 => PromisedAnswer.Op.Which.noop (r.getNoop)
  | 1 => PromisedAnswer.Op.Which.getPointerField (r.getGetPointerField)
  | _ => PromisedAnswer.Op.Which.none

def PromisedAnswer.Op.Reader.whichChecked (r : PromisedAnswer.Op.Reader) : Except String PromisedAnswer.Op.Which := do
  let disc := Capnp.getUInt16 r.struct 0
  match disc with
  | 0 => do
    let v ← r.getNoopChecked
    return PromisedAnswer.Op.Which.noop v
  | 1 => do
    let v ← r.getGetPointerFieldChecked
    return PromisedAnswer.Op.Which.getPointerField v
  | _ => return PromisedAnswer.Op.Which.none
def PromisedAnswer.Op.initRoot : Capnp.BuilderM PromisedAnswer.Op.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 0
  return { struct := sb }

def PromisedAnswer.Op.Builder.setNoop (b : PromisedAnswer.Op.Builder) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 0)
  pure ()

def PromisedAnswer.Op.Builder.setGetPointerField (b : PromisedAnswer.Op.Builder) (v : UInt16) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 0 (UInt16.ofNat 1)
  Capnp.setUInt16 b.struct 2 v


def ThirdPartyCapDescriptor.Reader.getId (r : ThirdPartyCapDescriptor.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def ThirdPartyCapDescriptor.Reader.getIdChecked (r : ThirdPartyCapDescriptor.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def ThirdPartyCapDescriptor.Reader.hasId (r : ThirdPartyCapDescriptor.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def ThirdPartyCapDescriptor.Reader.getVineId (r : ThirdPartyCapDescriptor.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def ThirdPartyCapDescriptor.Reader.getVineIdChecked (r : ThirdPartyCapDescriptor.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)
def ThirdPartyCapDescriptor.initRoot : Capnp.BuilderM ThirdPartyCapDescriptor.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def ThirdPartyCapDescriptor.Builder.clearId (b : ThirdPartyCapDescriptor.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def ThirdPartyCapDescriptor.Builder.getId (b : ThirdPartyCapDescriptor.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0

def ThirdPartyCapDescriptor.Builder.setVineId (b : ThirdPartyCapDescriptor.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v


def Exception.Reader.getReason (r : Exception.Reader) : Capnp.Text := Capnp.readText (Capnp.getPointer r.struct 0)
def Exception.Reader.getReasonChecked (r : Exception.Reader) : Except String (Capnp.Text) := Capnp.readTextChecked (Capnp.getPointer r.struct 0)
def Exception.Reader.getReasonView (r : Exception.Reader) : Capnp.TextView := Capnp.readTextView (Capnp.getPointer r.struct 0)
def Exception.Reader.getReasonViewChecked (r : Exception.Reader) : Except String Capnp.TextView := Capnp.readTextViewChecked (Capnp.getPointer r.struct 0)

def Exception.Reader.hasReason (r : Exception.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)


def Exception.Reader.getObsoleteIsCallersFault (r : Exception.Reader) : Bool := Capnp.getBool r.struct 0
def Exception.Reader.getObsoleteIsCallersFaultChecked (r : Exception.Reader) : Except String (Bool) := pure (Capnp.getBool r.struct 0)

def Exception.Reader.getObsoleteDurability (r : Exception.Reader) : UInt16 := Capnp.getUInt16 r.struct 2
def Exception.Reader.getObsoleteDurabilityChecked (r : Exception.Reader) : Except String (UInt16) := pure (Capnp.getUInt16 r.struct 2)

def Exception.Reader.getType (r : Exception.Reader) : Exception.Type := Exception.Type.ofUInt16 (Capnp.getUInt16 r.struct 4)
def Exception.Reader.getTypeChecked (r : Exception.Reader) : Except String (Exception.Type) := pure (Exception.Type.ofUInt16 (Capnp.getUInt16 r.struct 4))

def Exception.Reader.getTrace (r : Exception.Reader) : Capnp.Text := Capnp.readText (Capnp.getPointer r.struct 1)
def Exception.Reader.getTraceChecked (r : Exception.Reader) : Except String (Capnp.Text) := Capnp.readTextChecked (Capnp.getPointer r.struct 1)
def Exception.Reader.getTraceView (r : Exception.Reader) : Capnp.TextView := Capnp.readTextView (Capnp.getPointer r.struct 1)
def Exception.Reader.getTraceViewChecked (r : Exception.Reader) : Except String Capnp.TextView := Capnp.readTextViewChecked (Capnp.getPointer r.struct 1)

def Exception.Reader.hasTrace (r : Exception.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 1)


def Exception.Reader.getDetails (r : Exception.Reader) : Capnp.ListReader Exception.Detail.Reader := Capnp.ListReader.map Exception.Detail.fromStruct (Capnp.readListStructReader (Capnp.getPointer r.struct 2))
def Exception.Reader.getDetailsChecked (r : Exception.Reader) : Except String (Capnp.ListReader Exception.Detail.Reader) := do
  let r ← Capnp.readListStructCheckedReader (Capnp.getPointer r.struct 2)
  return Capnp.ListReader.map Exception.Detail.fromStruct r
def Exception.Reader.hasDetails (r : Exception.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 2)

def Exception.initRoot : Capnp.BuilderM Exception.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 3
  return { struct := sb }

def Exception.Builder.clearReason (b : Exception.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Exception.Builder.setReason (b : Exception.Builder) (v : Capnp.Text) : Capnp.BuilderM Unit := do
  Capnp.writeText (Capnp.getPointerBuilder b.struct 0) v

def Exception.Builder.setObsoleteIsCallersFault (b : Exception.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBool b.struct 0 v

def Exception.Builder.setObsoleteDurability (b : Exception.Builder) (v : UInt16) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 2 v

def Exception.Builder.setType (b : Exception.Builder) (v : Exception.Type) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 4 (Exception.Type.toUInt16 v)

def Exception.Builder.clearTrace (b : Exception.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 1)

def Exception.Builder.setTrace (b : Exception.Builder) (v : Capnp.Text) : Capnp.BuilderM Unit := do
  Capnp.writeText (Capnp.getPointerBuilder b.struct 1) v

def Exception.Builder.clearDetails (b : Exception.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 2)

def Exception.Builder.initDetails (b : Exception.Builder) (n : Nat) : Capnp.BuilderM (Array Exception.Detail.Builder) := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 2) 1 1 n
  return Array.map Exception.Detail.Builder.fromStruct (Capnp.listStructBuilders lb)
def Exception.Builder.setDetailsFromReaders (b : Exception.Builder) (v : Array Exception.Detail.Reader) : Capnp.BuilderM Unit := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 2) 1 1 (v).size
  let builders := Capnp.listStructBuilders lb
  let emptySb : Capnp.StructBuilder :=
    { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
  let mut i_132 := 0
  for elem_133 in (v) do
    let sb := builders.getD i_132 emptySb
    Capnp.copyStruct sb elem_133.struct
    i_132 := i_132 + 1


def Exception.Detail.Reader.getDetailId (r : Exception.Detail.Reader) : UInt64 := Capnp.getUInt64 r.struct 0
def Exception.Detail.Reader.getDetailIdChecked (r : Exception.Detail.Reader) : Except String (UInt64) := pure (Capnp.getUInt64 r.struct 0)

def Exception.Detail.Reader.getData (r : Exception.Detail.Reader) : Capnp.Data := Capnp.readData (Capnp.getPointer r.struct 0)
def Exception.Detail.Reader.getDataChecked (r : Exception.Detail.Reader) : Except String (Capnp.Data) := Capnp.readDataChecked (Capnp.getPointer r.struct 0)
def Exception.Detail.Reader.getDataView (r : Exception.Detail.Reader) : Capnp.DataView := Capnp.readDataView (Capnp.getPointer r.struct 0)
def Exception.Detail.Reader.getDataViewChecked (r : Exception.Detail.Reader) : Except String Capnp.DataView := Capnp.readDataViewChecked (Capnp.getPointer r.struct 0)

def Exception.Detail.Reader.hasData (r : Exception.Detail.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)

def Exception.Detail.initRoot : Capnp.BuilderM Exception.Detail.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def Exception.Detail.Builder.setDetailId (b : Exception.Detail.Builder) (v : UInt64) : Capnp.BuilderM Unit := do
  Capnp.setUInt64 b.struct 0 v

def Exception.Detail.Builder.clearData (b : Exception.Detail.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def Exception.Detail.Builder.setData (b : Exception.Detail.Builder) (v : Capnp.Data) : Capnp.BuilderM Unit := do
  Capnp.writeData (Capnp.getPointerBuilder b.struct 0) v


mutual
  def Message.Builder.setFromValue (b : Message.Builder) (v : Message) : Capnp.BuilderM Unit := do
    Capnp.copyStruct b.struct v.struct


  def Bootstrap.Builder.setFromValue (b : Bootstrap.Builder) (v : Bootstrap) : Capnp.BuilderM Unit := do
    b.setQuestionId v.questionId
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 0) v.deprecatedObjectId


  def Call.Builder.setFromValue (b : Call.Builder) (v : Call) : Capnp.BuilderM Unit := do
    b.setQuestionId v.questionId
    let sb ← b.initTarget
    MessageTarget.Builder.setFromValue sb v.target
    b.setInterfaceId v.interfaceId
    b.setMethodId v.methodId
    let sb ← b.initParams
    Payload.Builder.setFromValue sb v.params
    let gb := b.getSendResultsTo
    Call.SendResultsToGroup.Builder.setFromValue gb v.sendResultsTo
    b.setAllowThirdPartyTailCall v.allowThirdPartyTailCall
    b.setNoPromisePipelining v.noPromisePipelining
    b.setOnlyPromisePipeline v.onlyPromisePipeline


  def Call.SendResultsToGroup.Builder.setFromValue (b : Call.SendResultsToGroup.Builder) (v : Call.SendResultsToGroup) : Capnp.BuilderM Unit := do
    match v.which with
    | Call.SendResultsToGroup.Which.none => pure ()
    | Call.SendResultsToGroup.Which.caller value => do
      let _ := value
      b.setCaller
    | Call.SendResultsToGroup.Which.yourself value => do
      let _ := value
      b.setYourself
    | Call.SendResultsToGroup.Which.thirdParty value => do
      Capnp.setUInt16 b.struct 6 (UInt16.ofNat 2)
      Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 2) value


  def Return.Builder.setFromValue (b : Return.Builder) (v : Return) : Capnp.BuilderM Unit := do
    b.setAnswerId v.answerId
    b.setReleaseParamCaps v.releaseParamCaps
    b.setNoFinishNeeded v.noFinishNeeded
    match v.which with
    | Return.Which.none => pure ()
    | Return.Which.results value => do
      let sb ← b.initResults
      Capnp.copyStruct sb.struct value.struct
    | Return.Which.exception value => do
      let sb ← b.initException
      Capnp.copyStruct sb.struct value.struct
    | Return.Which.canceled value => do
      let _ := value
      b.setCanceled
    | Return.Which.resultsSentElsewhere value => do
      let _ := value
      b.setResultsSentElsewhere
    | Return.Which.takeFromOtherQuestion value => do
      b.setTakeFromOtherQuestion value
    | Return.Which.awaitFromThirdParty value => do
      Capnp.setUInt16 b.struct 6 (UInt16.ofNat 5)
      Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 0) value


  def Finish.Builder.setFromValue (b : Finish.Builder) (v : Finish) : Capnp.BuilderM Unit := do
    b.setQuestionId v.questionId
    b.setReleaseResultCaps v.releaseResultCaps
    b.setRequireEarlyCancellationWorkaround v.requireEarlyCancellationWorkaround


  def Resolve.Builder.setFromValue (b : Resolve.Builder) (v : Resolve) : Capnp.BuilderM Unit := do
    b.setPromiseId v.promiseId
    match v.which with
    | Resolve.Which.none => pure ()
    | Resolve.Which.cap value => do
      let sb ← b.initCap
      Capnp.copyStruct sb.struct value.struct
    | Resolve.Which.exception value => do
      let sb ← b.initException
      Capnp.copyStruct sb.struct value.struct


  def Release.Builder.setFromValue (b : Release.Builder) (v : Release) : Capnp.BuilderM Unit := do
    b.setId v.id
    b.setReferenceCount v.referenceCount


  def Disembargo.Builder.setFromValue (b : Disembargo.Builder) (v : Disembargo) : Capnp.BuilderM Unit := do
    let sb ← b.initTarget
    MessageTarget.Builder.setFromValue sb v.target
    let gb := b.getContext
    Disembargo.ContextGroup.Builder.setFromValue gb v.context


  def Disembargo.ContextGroup.Builder.setFromValue (b : Disembargo.ContextGroup.Builder) (v : Disembargo.ContextGroup) : Capnp.BuilderM Unit := do
    match v.which with
    | Disembargo.ContextGroup.Which.none => pure ()
    | Disembargo.ContextGroup.Which.senderLoopback value => do
      b.setSenderLoopback value
    | Disembargo.ContextGroup.Which.receiverLoopback value => do
      b.setReceiverLoopback value
    | Disembargo.ContextGroup.Which.accept value => do
      b.setAccept value


  def Provide.Builder.setFromValue (b : Provide.Builder) (v : Provide) : Capnp.BuilderM Unit := do
    b.setQuestionId v.questionId
    let sb ← b.initTarget
    MessageTarget.Builder.setFromValue sb v.target
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 1) v.recipient


  def Accept.Builder.setFromValue (b : Accept.Builder) (v : Accept) : Capnp.BuilderM Unit := do
    b.setQuestionId v.questionId
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 0) v.provision
    b.setEmbargo v.embargo


  def ThirdPartyAnswer.Builder.setFromValue (b : ThirdPartyAnswer.Builder) (v : ThirdPartyAnswer) : Capnp.BuilderM Unit := do
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 0) v.completion
    b.setAnswerId v.answerId


  def Join.Builder.setFromValue (b : Join.Builder) (v : Join) : Capnp.BuilderM Unit := do
    b.setQuestionId v.questionId
    let sb ← b.initTarget
    MessageTarget.Builder.setFromValue sb v.target
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 1) v.keyPart


  def MessageTarget.Builder.setFromValue (b : MessageTarget.Builder) (v : MessageTarget) : Capnp.BuilderM Unit := do
    match v.which with
    | MessageTarget.Which.none => pure ()
    | MessageTarget.Which.importedCap value => do
      b.setImportedCap value
    | MessageTarget.Which.promisedAnswer value => do
      let sb ← b.initPromisedAnswer
      Capnp.copyStruct sb.struct value.struct


  def Payload.Builder.setFromValue (b : Payload.Builder) (v : Payload) : Capnp.BuilderM Unit := do
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 0) v.content
    let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 1) 1 1 (v.capTable).size
    let builders := Capnp.listStructBuilders lb
    let emptySb : Capnp.StructBuilder :=
      { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
    let mut i_134 := 0
    for elem_135 in (v.capTable) do
      let sb := builders.getD i_134 emptySb
      CapDescriptor.Builder.setFromValue (CapDescriptor.Builder.fromStruct sb) elem_135
      i_134 := i_134 + 1


  def CapDescriptor.Builder.setFromValue (b : CapDescriptor.Builder) (v : CapDescriptor) : Capnp.BuilderM Unit := do
    b.setAttachedFd v.attachedFd
    match v.which with
    | CapDescriptor.Which.none_ => pure ()
    | CapDescriptor.Which.none value => do
      let _ := value
      b.setNone
    | CapDescriptor.Which.senderHosted value => do
      b.setSenderHosted value
    | CapDescriptor.Which.senderPromise value => do
      b.setSenderPromise value
    | CapDescriptor.Which.receiverHosted value => do
      b.setReceiverHosted value
    | CapDescriptor.Which.receiverAnswer value => do
      let sb ← b.initReceiverAnswer
      Capnp.copyStruct sb.struct value.struct
    | CapDescriptor.Which.thirdPartyHosted value => do
      let sb ← b.initThirdPartyHosted
      Capnp.copyStruct sb.struct value.struct


  def PromisedAnswer.Builder.setFromValue (b : PromisedAnswer.Builder) (v : PromisedAnswer) : Capnp.BuilderM Unit := do
    b.setQuestionId v.questionId
    let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 0) 1 0 (v.transform).size
    let builders := Capnp.listStructBuilders lb
    let emptySb : Capnp.StructBuilder :=
      { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
    let mut i_136 := 0
    for elem_137 in (v.transform) do
      let sb := builders.getD i_136 emptySb
      PromisedAnswer.Op.Builder.setFromValue (PromisedAnswer.Op.Builder.fromStruct sb) elem_137
      i_136 := i_136 + 1


  def PromisedAnswer.Op.Builder.setFromValue (b : PromisedAnswer.Op.Builder) (v : PromisedAnswer.Op) : Capnp.BuilderM Unit := do
    match v.which with
    | PromisedAnswer.Op.Which.none => pure ()
    | PromisedAnswer.Op.Which.noop value => do
      let _ := value
      b.setNoop
    | PromisedAnswer.Op.Which.getPointerField value => do
      b.setGetPointerField value


  def ThirdPartyCapDescriptor.Builder.setFromValue (b : ThirdPartyCapDescriptor.Builder) (v : ThirdPartyCapDescriptor) : Capnp.BuilderM Unit := do
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 0) v.id
    b.setVineId v.vineId


  def Exception.Builder.setFromValue (b : Exception.Builder) (v : Exception) : Capnp.BuilderM Unit := do
    b.setReason v.reason
    b.setObsoleteIsCallersFault v.obsoleteIsCallersFault
    b.setObsoleteDurability v.obsoleteDurability
    b.setType v.type
    b.setTrace v.trace
    let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 2) 1 1 (v.details).size
    let builders := Capnp.listStructBuilders lb
    let emptySb : Capnp.StructBuilder :=
      { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
    let mut i_138 := 0
    for elem_139 in (v.details) do
      let sb := builders.getD i_138 emptySb
      Exception.Detail.Builder.setFromValue (Exception.Detail.Builder.fromStruct sb) elem_139
      i_138 := i_138 + 1


  def Exception.Detail.Builder.setFromValue (b : Exception.Detail.Builder) (v : Exception.Detail) : Capnp.BuilderM Unit := do
    b.setDetailId v.detailId
    b.setData v.data


end

def Payload.Builder.setCapTable (b : Payload.Builder) (v : Array CapDescriptor) : Capnp.BuilderM Unit := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 1) 1 1 (v).size
  let builders := Capnp.listStructBuilders lb
  let emptySb : Capnp.StructBuilder :=
    { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
  let mut i_140 := 0
  for elem_141 in (v) do
    let sb := builders.getD i_140 emptySb
    CapDescriptor.Builder.setFromValue (CapDescriptor.Builder.fromStruct sb) elem_141
    i_140 := i_140 + 1


def PromisedAnswer.Builder.setTransform (b : PromisedAnswer.Builder) (v : Array PromisedAnswer.Op) : Capnp.BuilderM Unit := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 0) 1 0 (v).size
  let builders := Capnp.listStructBuilders lb
  let emptySb : Capnp.StructBuilder :=
    { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
  let mut i_142 := 0
  for elem_143 in (v) do
    let sb := builders.getD i_142 emptySb
    PromisedAnswer.Op.Builder.setFromValue (PromisedAnswer.Op.Builder.fromStruct sb) elem_143
    i_142 := i_142 + 1


def Exception.Builder.setDetails (b : Exception.Builder) (v : Array Exception.Detail) : Capnp.BuilderM Unit := do
  let lb ← Capnp.initStructListPointer (Capnp.getPointerBuilder b.struct 2) 1 1 (v).size
  let builders := Capnp.listStructBuilders lb
  let emptySb : Capnp.StructBuilder :=
    { seg := 0, dataOff := 0, dataWords := 0, ptrOff := 0, ptrCount := 0 }
  let mut i_144 := 0
  for elem_145 in (v) do
    let sb := builders.getD i_144 emptySb
    Exception.Detail.Builder.setFromValue (Exception.Detail.Builder.fromStruct sb) elem_145
    i_144 := i_144 + 1



mutual
  def Message.ofReader (r : Message.Reader) : Message := r


  def Bootstrap.ofReader (r : Bootstrap.Reader) : Bootstrap :=
    { questionId := r.getQuestionId
    , deprecatedObjectId := r.getDeprecatedObjectId
    }


  def Call.ofReader (r : Call.Reader) : Call :=
    { questionId := r.getQuestionId
    , target := MessageTarget.ofReader r.getTarget
    , interfaceId := r.getInterfaceId
    , methodId := r.getMethodId
    , params := Payload.ofReader r.getParams
    , sendResultsTo := Call.SendResultsToGroup.ofReader r.getSendResultsTo
    , allowThirdPartyTailCall := r.getAllowThirdPartyTailCall
    , noPromisePipelining := r.getNoPromisePipelining
    , onlyPromisePipeline := r.getOnlyPromisePipeline
    }


  def Call.SendResultsToGroup.ofReader (r : Call.SendResultsToGroup.Reader) : Call.SendResultsToGroup :=
    { which := r.which
    }


  def Return.ofReader (r : Return.Reader) : Return :=
    { answerId := r.getAnswerId
    , releaseParamCaps := r.getReleaseParamCaps
    , noFinishNeeded := r.getNoFinishNeeded
    , which := r.which
    }


  def Finish.ofReader (r : Finish.Reader) : Finish :=
    { questionId := r.getQuestionId
    , releaseResultCaps := r.getReleaseResultCaps
    , requireEarlyCancellationWorkaround := r.getRequireEarlyCancellationWorkaround
    }


  def Resolve.ofReader (r : Resolve.Reader) : Resolve :=
    { promiseId := r.getPromiseId
    , which := r.which
    }


  def Release.ofReader (r : Release.Reader) : Release :=
    { id := r.getId
    , referenceCount := r.getReferenceCount
    }


  def Disembargo.ofReader (r : Disembargo.Reader) : Disembargo :=
    { target := MessageTarget.ofReader r.getTarget
    , context := Disembargo.ContextGroup.ofReader r.getContext
    }


  def Disembargo.ContextGroup.ofReader (r : Disembargo.ContextGroup.Reader) : Disembargo.ContextGroup :=
    { which := r.which
    }


  def Provide.ofReader (r : Provide.Reader) : Provide :=
    { questionId := r.getQuestionId
    , target := MessageTarget.ofReader r.getTarget
    , recipient := r.getRecipient
    }


  def Accept.ofReader (r : Accept.Reader) : Accept :=
    { questionId := r.getQuestionId
    , provision := r.getProvision
    , embargo := r.getEmbargo
    }


  def ThirdPartyAnswer.ofReader (r : ThirdPartyAnswer.Reader) : ThirdPartyAnswer :=
    { completion := r.getCompletion
    , answerId := r.getAnswerId
    }


  def Join.ofReader (r : Join.Reader) : Join :=
    { questionId := r.getQuestionId
    , target := MessageTarget.ofReader r.getTarget
    , keyPart := r.getKeyPart
    }


  def MessageTarget.ofReader (r : MessageTarget.Reader) : MessageTarget :=
    { which := r.which
    }


  def Payload.ofReader (r : Payload.Reader) : Payload :=
    { content := r.getContent
    , capTable := Capnp.ListReader.toArray (Capnp.ListReader.map (fun x => CapDescriptor.ofReader x) (r.getCapTable))
    }


  def CapDescriptor.ofReader (r : CapDescriptor.Reader) : CapDescriptor :=
    { attachedFd := r.getAttachedFd
    , which := r.which
    }


  def PromisedAnswer.ofReader (r : PromisedAnswer.Reader) : PromisedAnswer :=
    { questionId := r.getQuestionId
    , transform := Capnp.ListReader.toArray (Capnp.ListReader.map (fun x => PromisedAnswer.Op.ofReader x) (r.getTransform))
    }


  def PromisedAnswer.Op.ofReader (r : PromisedAnswer.Op.Reader) : PromisedAnswer.Op :=
    { which := r.which
    }


  def ThirdPartyCapDescriptor.ofReader (r : ThirdPartyCapDescriptor.Reader) : ThirdPartyCapDescriptor :=
    { id := r.getId
    , vineId := r.getVineId
    }


  def Exception.ofReader (r : Exception.Reader) : Exception :=
    { reason := r.getReason
    , obsoleteIsCallersFault := r.getObsoleteIsCallersFault
    , obsoleteDurability := r.getObsoleteDurability
    , type := r.getType
    , trace := r.getTrace
    , details := Capnp.ListReader.toArray (Capnp.ListReader.map (fun x => Exception.Detail.ofReader x) (r.getDetails))
    }


  def Exception.Detail.ofReader (r : Exception.Detail.Reader) : Exception.Detail :=
    { detailId := r.getDetailId
    , data := r.getData
    }


end

end Capnp.Gen.c__.src.capnp.rpc
