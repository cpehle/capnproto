-- Generated by capnpc-lean4; DO NOT EDIT.
-- source: c++/src/capnp/rpc-twoparty.capnp

import Capnp.Runtime
import Capnp.Rpc

set_option maxHeartbeats 2000000


namespace Capnp.Gen.c__.src.capnp.rpc_twoparty

structure VatId.Reader where
  struct : Capnp.StructReader

  deriving BEq

def VatId.read (ptr : Capnp.AnyPointer) : VatId.Reader := { struct := Capnp.readStruct ptr }
def VatId.readChecked (ptr : Capnp.AnyPointer) : Except String VatId.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def VatId.fromStruct (sr : Capnp.StructReader) : VatId.Reader := { struct := sr }

structure VatId.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def VatId.Builder.fromStruct (sb : Capnp.StructBuilder) : VatId.Builder := { struct := sb }


structure ThirdPartyCompletion.Reader where
  struct : Capnp.StructReader

  deriving BEq

def ThirdPartyCompletion.read (ptr : Capnp.AnyPointer) : ThirdPartyCompletion.Reader := { struct := Capnp.readStruct ptr }
def ThirdPartyCompletion.readChecked (ptr : Capnp.AnyPointer) : Except String ThirdPartyCompletion.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def ThirdPartyCompletion.fromStruct (sr : Capnp.StructReader) : ThirdPartyCompletion.Reader := { struct := sr }

structure ThirdPartyCompletion.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def ThirdPartyCompletion.Builder.fromStruct (sb : Capnp.StructBuilder) : ThirdPartyCompletion.Builder := { struct := sb }


structure ThirdPartyToAwait.Reader where
  struct : Capnp.StructReader

  deriving BEq

def ThirdPartyToAwait.read (ptr : Capnp.AnyPointer) : ThirdPartyToAwait.Reader := { struct := Capnp.readStruct ptr }
def ThirdPartyToAwait.readChecked (ptr : Capnp.AnyPointer) : Except String ThirdPartyToAwait.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def ThirdPartyToAwait.fromStruct (sr : Capnp.StructReader) : ThirdPartyToAwait.Reader := { struct := sr }

structure ThirdPartyToAwait.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def ThirdPartyToAwait.Builder.fromStruct (sb : Capnp.StructBuilder) : ThirdPartyToAwait.Builder := { struct := sb }


structure ThirdPartyToContact.Reader where
  struct : Capnp.StructReader

  deriving BEq

def ThirdPartyToContact.read (ptr : Capnp.AnyPointer) : ThirdPartyToContact.Reader := { struct := Capnp.readStruct ptr }
def ThirdPartyToContact.readChecked (ptr : Capnp.AnyPointer) : Except String ThirdPartyToContact.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def ThirdPartyToContact.fromStruct (sr : Capnp.StructReader) : ThirdPartyToContact.Reader := { struct := sr }

structure ThirdPartyToContact.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def ThirdPartyToContact.Builder.fromStruct (sb : Capnp.StructBuilder) : ThirdPartyToContact.Builder := { struct := sb }


structure JoinKeyPart.Reader where
  struct : Capnp.StructReader

  deriving BEq

def JoinKeyPart.read (ptr : Capnp.AnyPointer) : JoinKeyPart.Reader := { struct := Capnp.readStruct ptr }
def JoinKeyPart.readChecked (ptr : Capnp.AnyPointer) : Except String JoinKeyPart.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def JoinKeyPart.fromStruct (sr : Capnp.StructReader) : JoinKeyPart.Reader := { struct := sr }

structure JoinKeyPart.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def JoinKeyPart.Builder.fromStruct (sb : Capnp.StructBuilder) : JoinKeyPart.Builder := { struct := sb }


structure JoinResult.Reader where
  struct : Capnp.StructReader

  deriving BEq

def JoinResult.read (ptr : Capnp.AnyPointer) : JoinResult.Reader := { struct := Capnp.readStruct ptr }
def JoinResult.readChecked (ptr : Capnp.AnyPointer) : Except String JoinResult.Reader := do
  let sr ← Capnp.readStructChecked ptr
  return { struct := sr }
def JoinResult.fromStruct (sr : Capnp.StructReader) : JoinResult.Reader := { struct := sr }

structure JoinResult.Builder where
  struct : Capnp.StructBuilder

  deriving BEq

def JoinResult.Builder.fromStruct (sb : Capnp.StructBuilder) : JoinResult.Builder := { struct := sb }


inductive Side where
  | server
  | client
  | unknown (value : UInt16)

  deriving BEq, Repr

def Side.toUInt16 : Side -> UInt16
  | Side.server => 0
  | Side.client => 1
  | Side.unknown v => v

def Side.ofUInt16 : UInt16 -> Side
  | 0 => Side.server
  | 1 => Side.client
  | v => Side.unknown v


mutual
  structure VatId where
    side : Side


  structure ThirdPartyCompletion where
    joinId : UInt32


  structure ThirdPartyToAwait where


  structure ThirdPartyToContact where


  structure JoinKeyPart where
    joinId : UInt32
    partCount : UInt16
    partNum : UInt16


  structure JoinResult where
    joinId : UInt32
    succeeded : Bool
    cap : Capnp.AnyPointer


end


def VatId.Reader.getSide (r : VatId.Reader) : Side := Side.ofUInt16 (Capnp.getUInt16 r.struct 0)
def VatId.Reader.getSideChecked (r : VatId.Reader) : Except String (Side) := pure (Side.ofUInt16 (Capnp.getUInt16 r.struct 0))
def VatId.initRoot : Capnp.BuilderM VatId.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 0
  return { struct := sb }

def VatId.Builder.setSide (b : VatId.Builder) (v : Side) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 0 (Side.toUInt16 v)


def ThirdPartyCompletion.Reader.getJoinId (r : ThirdPartyCompletion.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def ThirdPartyCompletion.Reader.getJoinIdChecked (r : ThirdPartyCompletion.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)
def ThirdPartyCompletion.initRoot : Capnp.BuilderM ThirdPartyCompletion.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 0
  return { struct := sb }

def ThirdPartyCompletion.Builder.setJoinId (b : ThirdPartyCompletion.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def ThirdPartyToAwait.initRoot : Capnp.BuilderM ThirdPartyToAwait.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 0 0
  return { struct := sb }

def ThirdPartyToContact.initRoot : Capnp.BuilderM ThirdPartyToContact.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 0 0
  return { struct := sb }


def JoinKeyPart.Reader.getJoinId (r : JoinKeyPart.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def JoinKeyPart.Reader.getJoinIdChecked (r : JoinKeyPart.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def JoinKeyPart.Reader.getPartCount (r : JoinKeyPart.Reader) : UInt16 := Capnp.getUInt16 r.struct 4
def JoinKeyPart.Reader.getPartCountChecked (r : JoinKeyPart.Reader) : Except String (UInt16) := pure (Capnp.getUInt16 r.struct 4)

def JoinKeyPart.Reader.getPartNum (r : JoinKeyPart.Reader) : UInt16 := Capnp.getUInt16 r.struct 6
def JoinKeyPart.Reader.getPartNumChecked (r : JoinKeyPart.Reader) : Except String (UInt16) := pure (Capnp.getUInt16 r.struct 6)
def JoinKeyPart.initRoot : Capnp.BuilderM JoinKeyPart.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 0
  return { struct := sb }

def JoinKeyPart.Builder.setJoinId (b : JoinKeyPart.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def JoinKeyPart.Builder.setPartCount (b : JoinKeyPart.Builder) (v : UInt16) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 4 v

def JoinKeyPart.Builder.setPartNum (b : JoinKeyPart.Builder) (v : UInt16) : Capnp.BuilderM Unit := do
  Capnp.setUInt16 b.struct 6 v


def JoinResult.Reader.getJoinId (r : JoinResult.Reader) : UInt32 := Capnp.getUInt32 r.struct 0
def JoinResult.Reader.getJoinIdChecked (r : JoinResult.Reader) : Except String (UInt32) := pure (Capnp.getUInt32 r.struct 0)

def JoinResult.Reader.getSucceeded (r : JoinResult.Reader) : Bool := Capnp.getBool r.struct 32
def JoinResult.Reader.getSucceededChecked (r : JoinResult.Reader) : Except String (Bool) := pure (Capnp.getBool r.struct 32)

def JoinResult.Reader.getCap (r : JoinResult.Reader) : Capnp.AnyPointer := Capnp.getPointer r.struct 0
def JoinResult.Reader.getCapChecked (r : JoinResult.Reader) : Except String (Capnp.AnyPointer) := Capnp.readAnyPointerChecked (Capnp.getPointer r.struct 0)
def JoinResult.Reader.hasCap (r : JoinResult.Reader) : Bool := !Capnp.isNullPointer (Capnp.getPointer r.struct 0)

def JoinResult.initRoot : Capnp.BuilderM JoinResult.Builder := do
  let p ← Capnp.getRootPointer
  let sb ← Capnp.initStructPointer p 1 1
  return { struct := sb }

def JoinResult.Builder.setJoinId (b : JoinResult.Builder) (v : UInt32) : Capnp.BuilderM Unit := do
  Capnp.setUInt32 b.struct 0 v

def JoinResult.Builder.setSucceeded (b : JoinResult.Builder) (v : Bool) : Capnp.BuilderM Unit := do
  Capnp.setBool b.struct 32 v

def JoinResult.Builder.clearCap (b : JoinResult.Builder) : Capnp.BuilderM Unit := do
  Capnp.clearPointer (Capnp.getPointerBuilder b.struct 0)

def JoinResult.Builder.getCap (b : JoinResult.Builder) : Capnp.AnyPointerBuilder := Capnp.getPointerBuilder b.struct 0


mutual
  def VatId.Builder.setFromValue (b : VatId.Builder) (v : VatId) : Capnp.BuilderM Unit := do
    b.setSide v.side


  def ThirdPartyCompletion.Builder.setFromValue (b : ThirdPartyCompletion.Builder) (v : ThirdPartyCompletion) : Capnp.BuilderM Unit := do
    b.setJoinId v.joinId


  def ThirdPartyToAwait.Builder.setFromValue (b : ThirdPartyToAwait.Builder) (v : ThirdPartyToAwait) : Capnp.BuilderM Unit := do
    let _ := b
    let _ := v
    pure ()


  def ThirdPartyToContact.Builder.setFromValue (b : ThirdPartyToContact.Builder) (v : ThirdPartyToContact) : Capnp.BuilderM Unit := do
    let _ := b
    let _ := v
    pure ()


  def JoinKeyPart.Builder.setFromValue (b : JoinKeyPart.Builder) (v : JoinKeyPart) : Capnp.BuilderM Unit := do
    b.setJoinId v.joinId
    b.setPartCount v.partCount
    b.setPartNum v.partNum


  def JoinResult.Builder.setFromValue (b : JoinResult.Builder) (v : JoinResult) : Capnp.BuilderM Unit := do
    b.setJoinId v.joinId
    b.setSucceeded v.succeeded
    Capnp.copyAnyPointer (Capnp.getPointerBuilder b.struct 0) v.cap


end


mutual
  def VatId.ofReader (r : VatId.Reader) : VatId :=
    { side := r.getSide
    }


  def ThirdPartyCompletion.ofReader (r : ThirdPartyCompletion.Reader) : ThirdPartyCompletion :=
    { joinId := r.getJoinId
    }


  def ThirdPartyToAwait.ofReader (_r : ThirdPartyToAwait.Reader) : ThirdPartyToAwait :=
    { 
    }


  def ThirdPartyToContact.ofReader (_r : ThirdPartyToContact.Reader) : ThirdPartyToContact :=
    { 
    }


  def JoinKeyPart.ofReader (r : JoinKeyPart.Reader) : JoinKeyPart :=
    { joinId := r.getJoinId
    , partCount := r.getPartCount
    , partNum := r.getPartNum
    }


  def JoinResult.ofReader (r : JoinResult.Reader) : JoinResult :=
    { joinId := r.getJoinId
    , succeeded := r.getSucceeded
    , cap := r.getCap
    }


end

end Capnp.Gen.c__.src.capnp.rpc_twoparty
